# data.archive_file.lambda_api_processor:
data "archive_file" "lambda_api_processor" {
    id                  = "2ee8fbdb7f51353761fbcaed764d47b9d73e9762"
    output_base64sha256 = "slgkXuHD2w61huYhohXy282aq6nZarPnRCWNtHgbTEk="
    output_base64sha512 = "3LLb6e+4BLxoINqc8vZ+1XcTlBl9t+ftZR7jDnLmMyLaFhJGhr2SsRB+v2vWvm4SMjNAuGnCd5t6yJEl99ifLg=="
    output_md5          = "f51dc0c94c85e59870d74a765f40df05"
    output_path         = "./../../../lambda/api-processor.zip"
    output_sha          = "2ee8fbdb7f51353761fbcaed764d47b9d73e9762"
    output_sha256       = "b258245ee1c3db0eb586e621a215f2dbcd9aaba9d96ab3e744258db4781b4c49"
    output_sha512       = "dcb2dbe9efb804bc6820da9cf2f67ed5771394197db7e7ed651ee30e72e63322da16124686bd92b1107ebf6bd6be6e12323340b869c2779b7ac89125f7d89f2e"
    output_size         = 1142
    source_file         = "./../../../lambda/api-processor.js"
    type                = "zip"
}

# data.archive_file.security_headers:
data "archive_file" "security_headers" {
    id                  = "1ac1d53b1417c028609f1f2aea919e15d9744944"
    output_base64sha256 = "8Ul3MGEJ8iICFDim2J0Dl/HxvP+rqk9ViWHsP51NCwE="
    output_base64sha512 = "ryqR6ZpNG3Esl+IxScywqx406kbD7hgltZrvRFV06S/6q/fHGx//JDi6KA45fMnnNdrVkYRw4XWXEBdbGSZ8ww=="
    output_md5          = "ad2ef92592a86a75f39c3ca933629b71"
    output_path         = "./../../../lambda/security-headers.zip"
    output_sha          = "1ac1d53b1417c028609f1f2aea919e15d9744944"
    output_sha256       = "f14977306109f222021438a6d89d0397f1f1bcffabaa4f558961ec3f9d4d0b01"
    output_sha512       = "af2a91e99a4d1b712c97e23149ccb0ab1e34ea46c3ee1825b59aef445574e92ffaabf7c71b1fff2438ba280e397cc9e735dad5918470e1759710175b19267cc3"
    output_size         = 602
    source_file         = "./../../../lambda/security-headers.js"
    type                = "zip"
}

# data.aws_ami.amazon_linux_2:
data "aws_ami" "amazon_linux_2" {
    architecture          = "x86_64"
    arn                   = "arn:aws:ec2:us-east-1::image/ami-0156001f0548e90b1"
    block_device_mappings = [
        {
            device_name  = "/dev/xvda"
            ebs          = {
                "delete_on_termination"      = "true"
                "encrypted"                  = "false"
                "iops"                       = "0"
                "snapshot_id"                = "snap-0ea2b465cc56e487c"
                "throughput"                 = "0"
                "volume_initialization_rate" = "0"
                "volume_size"                = "8"
                "volume_type"                = "gp2"
            }
            no_device    = [90mnull[0m[0m
            virtual_name = [90mnull[0m[0m
        },
    ]
    boot_mode             = [90mnull[0m[0m
    creation_date         = "2025-11-21T08:38:04.000Z"
    deprecation_time      = "2026-02-19T00:00:00.000Z"
    description           = "Amazon Linux 2 AMI 2.0.20251121.0 x86_64 HVM gp2"
    ena_support           = true
    hypervisor            = "xen"
    id                    = "ami-0156001f0548e90b1"
    image_id              = "ami-0156001f0548e90b1"
    image_location        = "amazon/amzn2-ami-hvm-2.0.20251121.0-x86_64-gp2"
    image_owner_alias     = "amazon"
    image_type            = "machine"
    imds_support          = [90mnull[0m[0m
    include_deprecated    = false
    kernel_id             = [90mnull[0m[0m
    last_launched_time    = [90mnull[0m[0m
    most_recent           = true
    name                  = "amzn2-ami-hvm-2.0.20251121.0-x86_64-gp2"
    owner_id              = "137112412989"
    owners                = [
        "amazon",
    ]
    platform              = [90mnull[0m[0m
    platform_details      = "Linux/UNIX"
    product_codes         = []
    public                = true
    ramdisk_id            = [90mnull[0m[0m
    root_device_name      = "/dev/xvda"
    root_device_type      = "ebs"
    root_snapshot_id      = "snap-0ea2b465cc56e487c"
    sriov_net_support     = "simple"
    state                 = "available"
    state_reason          = {
        "code"    = "UNSET"
        "message" = "UNSET"
    }
    tags                  = {}
    tpm_support           = [90mnull[0m[0m
    usage_operation       = "RunInstances"
    virtualization_type   = "hvm"

    filter {
        name   = "name"
        values = [
            "amzn2-ami-hvm-*-x86_64-gp2",
        ]
    }
    filter {
        name   = "virtualization-type"
        values = [
            "hvm",
        ]
    }
}

# data.aws_caller_identity.current:
data "aws_caller_identity" "current" {
    account_id = "298393324887"
    arn        = "arn:aws:iam::298393324887:user/JPIAM"
    id         = "298393324887"
    user_id    = "AIDAUK6NAZVL2EH6Z2I2A"
}

# data.aws_region.current:
data "aws_region" "current" {
    description = "US East (N. Virginia)"
    endpoint    = "ec2.us-east-1.amazonaws.com"
    id          = "us-east-1"
    name        = "us-east-1"
}

# aws_api_gateway_account.main:
resource "aws_api_gateway_account" "main" {
    api_key_version     = "4"
    cloudwatch_role_arn = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-api-gateway-cloudwatch"
    features            = [
        "UsagePlans",
    ]
    id                  = "api-gateway-account"
    throttle_settings   = [
        {
            burst_limit = 5000
            rate_limit  = 10000
        },
    ]
}

# aws_api_gateway_deployment.main:
resource "aws_api_gateway_deployment" "main" {
    created_date  = "2025-11-28T20:40:41Z"
    description   = [90mnull[0m[0m
    execution_arn = "arn:aws:execute-api:us-east-1:298393324887:36qx84kydl/"
    id            = "0tf2od"
    invoke_url    = "https://36qx84kydl.execute-api.us-east-1.amazonaws.com/"
    rest_api_id   = "36qx84kydl"
    triggers      = {
        "redeployment" = "57eedfb36b69019d9e442b7be79e50d8d691dc3e"
    }
}

# aws_api_gateway_integration.api:
resource "aws_api_gateway_integration" "api" {
    cache_key_parameters    = []
    cache_namespace         = "rv19rd"
    connection_id           = [90mnull[0m[0m
    connection_type         = "INTERNET"
    content_handling        = [90mnull[0m[0m
    credentials             = [90mnull[0m[0m
    http_method             = "ANY"
    id                      = "agi-36qx84kydl-rv19rd-ANY"
    integration_http_method = "ANY"
    passthrough_behavior    = "WHEN_NO_MATCH"
    request_parameters      = {}
    request_templates       = {}
    resource_id             = "rv19rd"
    rest_api_id             = "36qx84kydl"
    timeout_milliseconds    = 29000
    type                    = "HTTP_PROXY"
    uri                     = "http://cloud-portfolio-dev-alb-1314858601.us-east-1.elb.amazonaws.com/api"
}

# aws_api_gateway_integration.health:
resource "aws_api_gateway_integration" "health" {
    cache_key_parameters    = []
    cache_namespace         = "ct22kx"
    connection_id           = [90mnull[0m[0m
    connection_type         = "INTERNET"
    content_handling        = [90mnull[0m[0m
    credentials             = [90mnull[0m[0m
    http_method             = "GET"
    id                      = "agi-36qx84kydl-ct22kx-GET"
    integration_http_method = "GET"
    passthrough_behavior    = "WHEN_NO_MATCH"
    request_parameters      = {}
    request_templates       = {}
    resource_id             = "ct22kx"
    rest_api_id             = "36qx84kydl"
    timeout_milliseconds    = 29000
    type                    = "HTTP_PROXY"
    uri                     = "http://cloud-portfolio-dev-alb-1314858601.us-east-1.elb.amazonaws.com/health"
}

# aws_api_gateway_method.api:
resource "aws_api_gateway_method" "api" {
    api_key_required     = false
    authorization        = "NONE"
    authorization_scopes = []
    authorizer_id        = [90mnull[0m[0m
    http_method          = "ANY"
    id                   = "agm-36qx84kydl-rv19rd-ANY"
    operation_name       = [90mnull[0m[0m
    request_models       = {}
    request_parameters   = {}
    request_validator_id = [90mnull[0m[0m
    resource_id          = "rv19rd"
    rest_api_id          = "36qx84kydl"
}

# aws_api_gateway_method.health:
resource "aws_api_gateway_method" "health" {
    api_key_required     = false
    authorization        = "NONE"
    authorization_scopes = []
    authorizer_id        = [90mnull[0m[0m
    http_method          = "GET"
    id                   = "agm-36qx84kydl-ct22kx-GET"
    operation_name       = [90mnull[0m[0m
    request_models       = {}
    request_parameters   = {}
    request_validator_id = [90mnull[0m[0m
    resource_id          = "ct22kx"
    rest_api_id          = "36qx84kydl"
}

# aws_api_gateway_resource.api:
resource "aws_api_gateway_resource" "api" {
    id          = "rv19rd"
    parent_id   = "kgk10c50f8"
    path        = "/api"
    path_part   = "api"
    rest_api_id = "36qx84kydl"
}

# aws_api_gateway_resource.health:
resource "aws_api_gateway_resource" "health" {
    id          = "ct22kx"
    parent_id   = "kgk10c50f8"
    path        = "/health"
    path_part   = "health"
    rest_api_id = "36qx84kydl"
}

# aws_api_gateway_rest_api.main:
resource "aws_api_gateway_rest_api" "main" {
    api_key_source               = "HEADER"
    arn                          = "arn:aws:apigateway:us-east-1::/restapis/36qx84kydl"
    binary_media_types           = []
    created_date                 = "2025-11-28T20:29:51Z"
    description                  = "API Gateway for microservices architecture"
    disable_execute_api_endpoint = false
    execution_arn                = "arn:aws:execute-api:us-east-1:298393324887:36qx84kydl"
    id                           = "36qx84kydl"
    minimum_compression_size     = [90mnull[0m[0m
    name                         = "cloud-portfolio-dev-api"
    policy                       = [90mnull[0m[0m
    root_resource_id             = "kgk10c50f8"
    tags                         = {
        "Name" = "cloud-portfolio-dev-api"
    }
    tags_all                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-api"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }

    endpoint_configuration {
        ip_address_type  = "ipv4"
        types            = [
            "REGIONAL",
        ]
        vpc_endpoint_ids = []
    }
}

# aws_api_gateway_stage.main:
resource "aws_api_gateway_stage" "main" {
    arn                   = "arn:aws:apigateway:us-east-1::/restapis/36qx84kydl/stages/dev"
    cache_cluster_enabled = false
    cache_cluster_size    = [90mnull[0m[0m
    client_certificate_id = [90mnull[0m[0m
    deployment_id         = "0tf2od"
    description           = [90mnull[0m[0m
    documentation_version = [90mnull[0m[0m
    execution_arn         = "arn:aws:execute-api:us-east-1:298393324887:36qx84kydl/dev"
    id                    = "ags-36qx84kydl-dev"
    invoke_url            = "https://36qx84kydl.execute-api.us-east-1.amazonaws.com/dev"
    rest_api_id           = "36qx84kydl"
    stage_name            = "dev"
    tags                  = {
        "Name" = "cloud-portfolio-dev-api-stage"
    }
    tags_all              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-api-stage"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    variables             = {}
    web_acl_arn           = [90mnull[0m[0m
    xray_tracing_enabled  = true

    access_log_settings {
        destination_arn = "arn:aws:logs:us-east-1:298393324887:log-group:/aws/apigateway/cloud-portfolio-dev"
        format          = jsonencode(
            {
                caller         = "$context.identity.caller"
                httpMethod     = "$context.httpMethod"
                ip             = "$context.identity.sourceIp"
                protocol       = "$context.protocol"
                requestId      = "$context.requestId"
                requestTime    = "$context.requestTime"
                resourcePath   = "$context.resourcePath"
                responseLength = "$context.responseLength"
                status         = "$context.status"
                user           = "$context.identity.user"
            }
        )
    }
}

# aws_api_gateway_usage_plan.main:
resource "aws_api_gateway_usage_plan" "main" {
    arn          = "arn:aws:apigateway:us-east-1::/usageplans/x67c1f"
    description  = "Usage plan for API Gateway"
    id           = "x67c1f"
    name         = "cloud-portfolio-dev-usage-plan"
    product_code = [90mnull[0m[0m
    tags         = {
        "Name" = "cloud-portfolio-dev-usage-plan"
    }
    tags_all     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-usage-plan"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }

    api_stages {
        api_id = "36qx84kydl"
        stage  = "dev"
    }

    quota_settings {
        limit  = 10000
        offset = 0
        period = "DAY"
    }

    throttle_settings {
        burst_limit = 100
        rate_limit  = 50
    }
}

# aws_autoscaling_group.web:
resource "aws_autoscaling_group" "web" {
    arn                              = "arn:aws:autoscaling:us-east-1:298393324887:autoScalingGroup:6705fa2f-d495-4947-9e23-8389d6e76e78:autoScalingGroupName/cloud-portfolio-dev-web-asg"
    availability_zones               = [
        "us-east-1a",
        "us-east-1b",
    ]
    capacity_rebalance               = false
    context                          = [90mnull[0m[0m
    default_cooldown                 = 300
    default_instance_warmup          = 0
    desired_capacity                 = 2
    desired_capacity_type            = [90mnull[0m[0m
    enabled_metrics                  = []
    force_delete                     = false
    force_delete_warm_pool           = false
    health_check_grace_period        = 300
    health_check_type                = "ELB"
    id                               = "cloud-portfolio-dev-web-asg"
    ignore_failed_scaling_activities = false
    launch_configuration             = [90mnull[0m[0m
    load_balancers                   = []
    max_instance_lifetime            = 0
    max_size                         = 4
    metrics_granularity              = "1Minute"
    min_size                         = 2
    name                             = "cloud-portfolio-dev-web-asg"
    name_prefix                      = [90mnull[0m[0m
    placement_group                  = [90mnull[0m[0m
    predicted_capacity               = 0
    protect_from_scale_in            = false
    service_linked_role_arn          = "arn:aws:iam::298393324887:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling"
    suspended_processes              = []
    target_group_arns                = [
        "arn:aws:elasticloadbalancing:us-east-1:298393324887:targetgroup/web-20251127183400100500000001/bdff4c0cb3f41491",
    ]
    termination_policies             = []
    vpc_zone_identifier              = [
        "subnet-02d40ebb9d81672cb",
        "subnet-08d9f4a05dc2f8622",
    ]
    wait_for_capacity_timeout        = "10m"
    warm_pool_size                   = 0

    availability_zone_distribution {
        capacity_distribution_strategy = "balanced-best-effort"
    }

    capacity_reservation_specification {
        capacity_reservation_preference = "default"
    }

    launch_template {
        id      = "lt-09b4e56a20f8cda75"
        name    = "cloud-portfolio-dev-web-20251127182340011000000003"
        version = "$Latest"
    }

    tag {
        key                 = "Name"
        propagate_at_launch = true
        value               = "cloud-portfolio-dev-asg-instance"
    }
    tag {
        key                 = "Project"
        propagate_at_launch = true
        value               = "cloud-portfolio"
    }

    traffic_source {
        identifier = "arn:aws:elasticloadbalancing:us-east-1:298393324887:targetgroup/web-20251127183400100500000001/bdff4c0cb3f41491"
        type       = "elbv2"
    }
}

# aws_autoscaling_policy.cpu_target:
resource "aws_autoscaling_policy" "cpu_target" {
    adjustment_type           = [90mnull[0m[0m
    arn                       = "arn:aws:autoscaling:us-east-1:298393324887:scalingPolicy:572fa142-ced3-4dcb-a75b-0cfb32ef48ef:autoScalingGroupName/cloud-portfolio-dev-web-asg:policyName/cloud-portfolio-dev-cpu-target"
    autoscaling_group_name    = "cloud-portfolio-dev-web-asg"
    cooldown                  = 0
    enabled                   = true
    estimated_instance_warmup = 0
    id                        = "cloud-portfolio-dev-cpu-target"
    metric_aggregation_type   = [90mnull[0m[0m
    min_adjustment_magnitude  = 0
    name                      = "cloud-portfolio-dev-cpu-target"
    policy_type               = "TargetTrackingScaling"
    scaling_adjustment        = 0

    target_tracking_configuration {
        disable_scale_in = false
        target_value     = 70

        predefined_metric_specification {
            predefined_metric_type = "ASGAverageCPUUtilization"
            resource_label         = [90mnull[0m[0m
        }
    }
}

# aws_backup_plan.daily:
resource "aws_backup_plan" "daily" {
    arn      = "arn:aws:backup:us-east-1:298393324887:backup-plan:5f612e60-98ce-44ff-b9fe-910638092bbf"
    id       = "5f612e60-98ce-44ff-b9fe-910638092bbf"
    name     = "cloud-portfolio-dev-daily-backup"
    tags     = {
        "Name" = "cloud-portfolio-dev-daily-backup"
    }
    tags_all = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-daily-backup"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    version  = "NTEyNTlhOGUtZjdmMy00Y2MxLWFkMGQtMDQxOGIyNzIzYjJm"

    rule {
        completion_window            = 180
        enable_continuous_backup     = false
        recovery_point_tags          = {
            "BackupType" = "Automated"
            "Frequency"  = "Daily"
        }
        rule_name                    = "daily_backup_rule"
        schedule                     = "cron(0 5 * * ? *)"
        schedule_expression_timezone = "Etc/UTC"
        start_window                 = 60
        target_vault_name            = "cloud-portfolio-dev-backup-vault"

        lifecycle {
            cold_storage_after                        = 0
            delete_after                              = 30
            opt_in_to_archive_for_supported_resources = false
        }
    }
    rule {
        completion_window            = 180
        enable_continuous_backup     = false
        recovery_point_tags          = {
            "BackupType" = "Automated"
            "Frequency"  = "Monthly"
        }
        rule_name                    = "monthly_backup_rule"
        schedule                     = "cron(0 2 1 * ? *)"
        schedule_expression_timezone = "Etc/UTC"
        start_window                 = 60
        target_vault_name            = "cloud-portfolio-dev-backup-vault"

        lifecycle {
            cold_storage_after                        = 0
            delete_after                              = 365
            opt_in_to_archive_for_supported_resources = false
        }
    }
    rule {
        completion_window            = 180
        enable_continuous_backup     = false
        recovery_point_tags          = {
            "BackupType" = "Automated"
            "Frequency"  = "Weekly"
        }
        rule_name                    = "weekly_backup_rule"
        schedule                     = "cron(0 3 ? * SUN *)"
        schedule_expression_timezone = "Etc/UTC"
        start_window                 = 60
        target_vault_name            = "cloud-portfolio-dev-backup-vault"

        lifecycle {
            cold_storage_after                        = 0
            delete_after                              = 90
            opt_in_to_archive_for_supported_resources = false
        }
    }
}

# aws_backup_selection.rds:
resource "aws_backup_selection" "rds" {
    iam_role_arn  = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-backup-role"
    id            = "2161609e-908d-4c47-8325-e202935be31f"
    name          = "cloud-portfolio-dev-rds-backup"
    not_resources = []
    plan_id       = "5f612e60-98ce-44ff-b9fe-910638092bbf"
    resources     = [
        "arn:aws:rds:us-east-1:298393324887:db:cloud-portfolio-dev-mysql",
    ]

    condition {
    }

    selection_tag {
        key   = "BackupEnabled"
        type  = "STRINGEQUALS"
        value = "true"
    }
}

# aws_backup_selection.s3:
resource "aws_backup_selection" "s3" {
    iam_role_arn  = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-backup-role"
    id            = "c21dd6db-830b-4180-aa1f-613acb942760"
    name          = "cloud-portfolio-dev-s3-backup"
    not_resources = []
    plan_id       = "5f612e60-98ce-44ff-b9fe-910638092bbf"
    resources     = [
        "arn:aws:s3:::cloud-portfolio-dev-static-g8al5lmt",
    ]

    condition {
    }

    selection_tag {
        key   = "BackupEnabled"
        type  = "STRINGEQUALS"
        value = "true"
    }
}

# aws_backup_vault.main:
resource "aws_backup_vault" "main" {
    arn             = "arn:aws:backup:us-east-1:298393324887:backup-vault:cloud-portfolio-dev-backup-vault"
    force_destroy   = false
    id              = "cloud-portfolio-dev-backup-vault"
    kms_key_arn     = "arn:aws:kms:us-east-1:298393324887:key/e384a215-caa8-463a-938a-640e270b257e"
    name            = "cloud-portfolio-dev-backup-vault"
    recovery_points = 0
    tags            = {
        "Name" = "cloud-portfolio-dev-backup-vault"
    }
    tags_all        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-backup-vault"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
}

# aws_budgets_budget.monthly:
resource "aws_budgets_budget" "monthly" {
    account_id        = "298393324887"
    arn               = "arn:aws:budgets::298393324887:budget/cloud-portfolio-dev-monthly-budget"
    budget_type       = "COST"
    id                = "298393324887:cloud-portfolio-dev-monthly-budget"
    limit_amount      = "50.0"
    limit_unit        = "USD"
    name              = "cloud-portfolio-dev-monthly-budget"
    name_prefix       = [90mnull[0m[0m
    tags              = {}
    tags_all          = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    time_period_end   = "2087-06-15_00:00"
    time_period_start = "2025-11-01_00:00"
    time_unit         = "MONTHLY"

    cost_types {
        include_credit             = true
        include_discount           = true
        include_other_subscription = true
        include_recurring          = true
        include_refund             = true
        include_subscription       = true
        include_support            = true
        include_tax                = true
        include_upfront            = true
        use_amortized              = false
        use_blended                = false
    }

    notification {
        comparison_operator        = "GREATER_THAN"
        notification_type          = "ACTUAL"
        subscriber_email_addresses = [
            "jacobspeart@gmail.com",
        ]
        subscriber_sns_topic_arns  = []
        threshold                  = 100
        threshold_type             = "PERCENTAGE"
    }
    notification {
        comparison_operator        = "GREATER_THAN"
        notification_type          = "FORECASTED"
        subscriber_email_addresses = [
            "jacobspeart@gmail.com",
        ]
        subscriber_sns_topic_arns  = []
        threshold                  = 80
        threshold_type             = "PERCENTAGE"
    }
}

# aws_cloudfront_distribution.main:
resource "aws_cloudfront_distribution" "main" {
    aliases                         = []
    arn                             = "arn:aws:cloudfront::298393324887:distribution/EEGNBRUORVUNN"
    caller_reference                = "terraform-20251128042006886100000002"
    comment                         = "cloud-portfolio-dev-cdn"
    continuous_deployment_policy_id = [90mnull[0m[0m
    default_root_object             = "index.html"
    domain_name                     = "d3gk6kd8d1vp2t.cloudfront.net"
    enabled                         = true
    etag                            = "E19A3ZDZBZY1SV"
    hosted_zone_id                  = "Z2FDTNDATAQYW2"
    http_version                    = "http2"
    id                              = "EEGNBRUORVUNN"
    in_progress_validation_batches  = 0
    is_ipv6_enabled                 = true
    last_modified_time              = "2025-11-28 20:30:07.323 +0000 UTC"
    price_class                     = "PriceClass_100"
    retain_on_delete                = false
    staging                         = false
    status                          = "Deployed"
    tags                            = {
        "Name" = "cloud-portfolio-dev-cdn"
    }
    tags_all                        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-cdn"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    trusted_key_groups              = [
        {
            enabled = false
            items   = []
        },
    ]
    trusted_signers                 = [
        {
            enabled = false
            items   = []
        },
    ]
    wait_for_deployment             = true
    web_acl_id                      = "arn:aws:wafv2:us-east-1:298393324887:global/webacl/cloud-portfolio-dev-cloudfront-waf/2211aa71-b912-4a9c-ac3f-3ed32e73565f"

    default_cache_behavior {
        allowed_methods            = [
            "DELETE",
            "GET",
            "HEAD",
            "OPTIONS",
            "PATCH",
            "POST",
            "PUT",
        ]
        cache_policy_id            = [90mnull[0m[0m
        cached_methods             = [
            "GET",
            "HEAD",
        ]
        compress                   = true
        default_ttl                = 0
        field_level_encryption_id  = [90mnull[0m[0m
        max_ttl                    = 0
        min_ttl                    = 0
        origin_request_policy_id   = [90mnull[0m[0m
        realtime_log_config_arn    = [90mnull[0m[0m
        response_headers_policy_id = [90mnull[0m[0m
        smooth_streaming           = false
        target_origin_id           = "alb-cloud-portfolio"
        trusted_key_groups         = []
        trusted_signers            = []
        viewer_protocol_policy     = "redirect-to-https"

        forwarded_values {
            headers                 = [
                "Access-Control-Request-Headers",
                "Access-Control-Request-Method",
                "Host",
                "Origin",
            ]
            query_string            = true
            query_string_cache_keys = []

            cookies {
                forward           = "all"
                whitelisted_names = []
            }
        }

        grpc_config {
            enabled = false
        }

        lambda_function_association {
            event_type   = "origin-response"
            include_body = false
            lambda_arn   = "arn:aws:lambda:us-east-1:298393324887:function:cloud-portfolio-dev-security-headers:1"
        }
    }

    ordered_cache_behavior {
        allowed_methods            = [
            "GET",
            "HEAD",
            "OPTIONS",
        ]
        cache_policy_id            = [90mnull[0m[0m
        cached_methods             = [
            "GET",
            "HEAD",
        ]
        compress                   = true
        default_ttl                = 86400
        field_level_encryption_id  = [90mnull[0m[0m
        max_ttl                    = 31536000
        min_ttl                    = 0
        origin_request_policy_id   = [90mnull[0m[0m
        path_pattern               = "/static/*"
        realtime_log_config_arn    = [90mnull[0m[0m
        response_headers_policy_id = [90mnull[0m[0m
        smooth_streaming           = false
        target_origin_id           = "s3-cloud-portfolio"
        trusted_key_groups         = []
        trusted_signers            = []
        viewer_protocol_policy     = "redirect-to-https"

        forwarded_values {
            headers                 = []
            query_string            = false
            query_string_cache_keys = []

            cookies {
                forward           = "none"
                whitelisted_names = []
            }
        }

        grpc_config {
            enabled = false
        }
    }
    ordered_cache_behavior {
        allowed_methods            = [
            "GET",
            "HEAD",
        ]
        cache_policy_id            = [90mnull[0m[0m
        cached_methods             = [
            "GET",
            "HEAD",
        ]
        compress                   = true
        default_ttl                = 604800
        field_level_encryption_id  = [90mnull[0m[0m
        max_ttl                    = 31536000
        min_ttl                    = 0
        origin_request_policy_id   = [90mnull[0m[0m
        path_pattern               = "*.jpg"
        realtime_log_config_arn    = [90mnull[0m[0m
        response_headers_policy_id = [90mnull[0m[0m
        smooth_streaming           = false
        target_origin_id           = "s3-cloud-portfolio"
        trusted_key_groups         = []
        trusted_signers            = []
        viewer_protocol_policy     = "redirect-to-https"

        forwarded_values {
            headers                 = []
            query_string            = false
            query_string_cache_keys = []

            cookies {
                forward           = "none"
                whitelisted_names = []
            }
        }

        grpc_config {
            enabled = false
        }
    }

    origin {
        connection_attempts      = 3
        connection_timeout       = 10
        domain_name              = "cloud-portfolio-dev-alb-1314858601.us-east-1.elb.amazonaws.com"
        origin_access_control_id = [90mnull[0m[0m
        origin_id                = "alb-cloud-portfolio"
        origin_path              = [90mnull[0m[0m

        custom_origin_config {
            http_port                = 80
            https_port               = 443
            origin_keepalive_timeout = 5
            origin_protocol_policy   = "http-only"
            origin_read_timeout      = 30
            origin_ssl_protocols     = [
                "TLSv1.2",
            ]
        }
    }
    origin {
        connection_attempts      = 3
        connection_timeout       = 10
        domain_name              = "cloud-portfolio-dev-static-g8al5lmt.s3.us-east-1.amazonaws.com"
        origin_access_control_id = [90mnull[0m[0m
        origin_id                = "s3-cloud-portfolio"
        origin_path              = [90mnull[0m[0m

        s3_origin_config {
            origin_access_identity = "origin-access-identity/cloudfront/E1XH96VXJRX0SR"
        }
    }

    restrictions {
        geo_restriction {
            locations        = []
            restriction_type = "none"
        }
    }

    viewer_certificate {
        acm_certificate_arn            = [90mnull[0m[0m
        cloudfront_default_certificate = true
        iam_certificate_id             = [90mnull[0m[0m
        minimum_protocol_version       = "TLSv1"
        ssl_support_method             = [90mnull[0m[0m
    }
}

# aws_cloudfront_origin_access_identity.main:
resource "aws_cloudfront_origin_access_identity" "main" {
    arn                             = "arn:aws:cloudfront::298393324887:origin-access-identity/E1XH96VXJRX0SR"
    caller_reference                = "terraform-20251128042005740300000001"
    cloudfront_access_identity_path = "origin-access-identity/cloudfront/E1XH96VXJRX0SR"
    comment                         = "cloud-portfolio-dev-oai"
    etag                            = "E3UN6WX5RRO2AG"
    iam_arn                         = "arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E1XH96VXJRX0SR"
    id                              = "E1XH96VXJRX0SR"
    s3_canonical_user_id            = "c938551540dafe93848abfc10c23948702530f5af60cf447c8f1a8724da9ad79fe6a67766941b1dcd0a519a0834bcca7"
}

# aws_cloudwatch_dashboard.main:
resource "aws_cloudwatch_dashboard" "main" {
    dashboard_arn  = "arn:aws:cloudwatch::298393324887:dashboard/cloud-portfolio-dev-dashboard"
    dashboard_body = jsonencode(
        {
            widgets = [
                {
                    properties = {
                        metrics = [
                            [
                                "AWS/EC2",
                                "CPUUtilization",
                                {
                                    stat = "Average"
                                },
                            ],
                            [
                                ".",
                                ".",
                                {
                                    stat = "Maximum"
                                },
                            ],
                        ]
                        period  = 300
                        region  = "us-east-1"
                        stat    = "Average"
                        title   = "EC2 CPU Utilization"
                        view    = "timeSeries"
                        yaxis   = {
                            left = {
                                max = 100
                                min = 0
                            }
                        }
                    }
                    type       = "metric"
                },
                {
                    properties = {
                        metrics = [
                            [
                                "AWS/ApplicationELB",
                                "TargetResponseTime",
                                {
                                    stat = "Average"
                                },
                            ],
                            [
                                ".",
                                "RequestCount",
                                {
                                    stat  = "Sum"
                                    yAxis = "right"
                                },
                            ],
                            [
                                ".",
                                "HTTPCode_Target_2XX_Count",
                                {
                                    stat  = "Sum"
                                    yAxis = "right"
                                },
                            ],
                            [
                                ".",
                                "HTTPCode_Target_5XX_Count",
                                {
                                    stat  = "Sum"
                                    yAxis = "right"
                                },
                            ],
                        ]
                        period  = 300
                        region  = "us-east-1"
                        stat    = "Average"
                        title   = "ALB Performance"
                        view    = "timeSeries"
                    }
                    type       = "metric"
                },
                {
                    properties = {
                        metrics = [
                            [
                                "AWS/RDS",
                                "DatabaseConnections",
                                {
                                    stat = "Average"
                                },
                            ],
                            [
                                ".",
                                "CPUUtilization",
                                {
                                    stat  = "Average"
                                    yAxis = "right"
                                },
                            ],
                        ]
                        period  = 300
                        region  = "us-east-1"
                        stat    = "Average"
                        title   = "RDS Database Metrics"
                        view    = "timeSeries"
                    }
                    type       = "metric"
                },
                {
                    properties = {
                        metrics = [
                            [
                                "AWS/CloudFront",
                                "Requests",
                                {
                                    stat = "Sum"
                                },
                            ],
                            [
                                ".",
                                "BytesDownloaded",
                                {
                                    stat  = "Sum"
                                    yAxis = "right"
                                },
                            ],
                            [
                                ".",
                                "4xxErrorRate",
                                {
                                    stat  = "Average"
                                    yAxis = "right"
                                },
                            ],
                            [
                                ".",
                                "5xxErrorRate",
                                {
                                    stat  = "Average"
                                    yAxis = "right"
                                },
                            ],
                        ]
                        period  = 300
                        region  = "us-east-1"
                        stat    = "Sum"
                        title   = "CloudFront CDN"
                        view    = "timeSeries"
                    }
                    type       = "metric"
                },
            ]
        }
    )
    dashboard_name = "cloud-portfolio-dev-dashboard"
    id             = "cloud-portfolio-dev-dashboard"
}

# aws_cloudwatch_event_rule.backup_failure:
resource "aws_cloudwatch_event_rule" "backup_failure" {
    arn                 = "arn:aws:events:us-east-1:298393324887:rule/cloud-portfolio-dev-backup-failure"
    description         = "Trigger on backup failure"
    event_bus_name      = "default"
    event_pattern       = jsonencode(
        {
            detail      = {
                state = [
                    "FAILED",
                    "ABORTED",
                ]
            }
            detail-type = [
                "Backup Job State Change",
            ]
            source      = [
                "aws.backup",
            ]
        }
    )
    force_destroy       = false
    id                  = "cloud-portfolio-dev-backup-failure"
    is_enabled          = true
    name                = "cloud-portfolio-dev-backup-failure"
    name_prefix         = [90mnull[0m[0m
    role_arn            = [90mnull[0m[0m
    schedule_expression = [90mnull[0m[0m
    state               = "ENABLED"
    tags                = {}
    tags_all            = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
}

# aws_cloudwatch_event_rule.backup_success:
resource "aws_cloudwatch_event_rule" "backup_success" {
    arn                 = "arn:aws:events:us-east-1:298393324887:rule/cloud-portfolio-dev-backup-success"
    description         = "Trigger on successful backup completion"
    event_bus_name      = "default"
    event_pattern       = jsonencode(
        {
            detail      = {
                state = [
                    "COMPLETED",
                ]
            }
            detail-type = [
                "Backup Job State Change",
            ]
            source      = [
                "aws.backup",
            ]
        }
    )
    force_destroy       = false
    id                  = "cloud-portfolio-dev-backup-success"
    is_enabled          = true
    name                = "cloud-portfolio-dev-backup-success"
    name_prefix         = [90mnull[0m[0m
    role_arn            = [90mnull[0m[0m
    schedule_expression = [90mnull[0m[0m
    state               = "ENABLED"
    tags                = {}
    tags_all            = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
}

# aws_cloudwatch_event_target.backup_failure_sns:
resource "aws_cloudwatch_event_target" "backup_failure_sns" {
    arn            = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-backup-notifications"
    event_bus_name = "default"
    force_destroy  = false
    id             = "cloud-portfolio-dev-backup-failure-SendToSNS"
    input          = [90mnull[0m[0m
    input_path     = [90mnull[0m[0m
    role_arn       = [90mnull[0m[0m
    rule           = "cloud-portfolio-dev-backup-failure"
    target_id      = "SendToSNS"
}

# aws_cloudwatch_event_target.backup_success_sns:
resource "aws_cloudwatch_event_target" "backup_success_sns" {
    arn            = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-backup-notifications"
    event_bus_name = "default"
    force_destroy  = false
    id             = "cloud-portfolio-dev-backup-success-SendToSNS"
    input          = [90mnull[0m[0m
    input_path     = [90mnull[0m[0m
    role_arn       = [90mnull[0m[0m
    rule           = "cloud-portfolio-dev-backup-success"
    target_id      = "SendToSNS"
}

# aws_cloudwatch_log_group.api_gateway:
resource "aws_cloudwatch_log_group" "api_gateway" {
    arn               = "arn:aws:logs:us-east-1:298393324887:log-group:/aws/apigateway/cloud-portfolio-dev"
    id                = "/aws/apigateway/cloud-portfolio-dev"
    kms_key_id        = [90mnull[0m[0m
    log_group_class   = "STANDARD"
    name              = "/aws/apigateway/cloud-portfolio-dev"
    name_prefix       = [90mnull[0m[0m
    retention_in_days = 30
    skip_destroy      = false
    tags              = {
        "Name" = "cloud-portfolio-dev-api-gateway-logs"
    }
    tags_all          = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-api-gateway-logs"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
}

# aws_cloudwatch_log_group.ecs:
resource "aws_cloudwatch_log_group" "ecs" {
    arn               = "arn:aws:logs:us-east-1:298393324887:log-group:/ecs/cloud-portfolio-dev"
    id                = "/ecs/cloud-portfolio-dev"
    kms_key_id        = [90mnull[0m[0m
    log_group_class   = "STANDARD"
    name              = "/ecs/cloud-portfolio-dev"
    name_prefix       = [90mnull[0m[0m
    retention_in_days = 30
    skip_destroy      = false
    tags              = {
        "Name" = "cloud-portfolio-dev-ecs-logs"
    }
    tags_all          = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-ecs-logs"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
}

# aws_cloudwatch_log_group.lambda_api_processor:
resource "aws_cloudwatch_log_group" "lambda_api_processor" {
    arn               = "arn:aws:logs:us-east-1:298393324887:log-group:/aws/lambda/cloud-portfolio-dev-api-processor"
    id                = "/aws/lambda/cloud-portfolio-dev-api-processor"
    kms_key_id        = [90mnull[0m[0m
    log_group_class   = "STANDARD"
    name              = "/aws/lambda/cloud-portfolio-dev-api-processor"
    name_prefix       = [90mnull[0m[0m
    retention_in_days = 14
    skip_destroy      = false
    tags              = {
        "Name" = "cloud-portfolio-dev-lambda-api-processor-logs"
    }
    tags_all          = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-lambda-api-processor-logs"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
}

# aws_cloudwatch_log_group.session_logs:
resource "aws_cloudwatch_log_group" "session_logs" {
    arn               = "arn:aws:logs:us-east-1:298393324887:log-group:/aws/ssm/cloud-portfolio-dev-session-logs"
    id                = "/aws/ssm/cloud-portfolio-dev-session-logs"
    kms_key_id        = [90mnull[0m[0m
    log_group_class   = "STANDARD"
    name              = "/aws/ssm/cloud-portfolio-dev-session-logs"
    name_prefix       = [90mnull[0m[0m
    retention_in_days = 30
    skip_destroy      = false
    tags              = {
        "Name" = "cloud-portfolio-dev-session-logs"
    }
    tags_all          = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-session-logs"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
}

# aws_cloudwatch_log_group.vpc_flow_logs:
resource "aws_cloudwatch_log_group" "vpc_flow_logs" {
    arn               = "arn:aws:logs:us-east-1:298393324887:log-group:/aws/vpc/cloud-portfolio-dev-flow-logs"
    id                = "/aws/vpc/cloud-portfolio-dev-flow-logs"
    kms_key_id        = [90mnull[0m[0m
    log_group_class   = "STANDARD"
    name              = "/aws/vpc/cloud-portfolio-dev-flow-logs"
    name_prefix       = [90mnull[0m[0m
    retention_in_days = 30
    skip_destroy      = false
    tags              = {
        "Name" = "cloud-portfolio-dev-vpc-flow-logs"
    }
    tags_all          = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-vpc-flow-logs"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
}

# aws_cloudwatch_log_metric_filter.rejected_traffic:
resource "aws_cloudwatch_log_metric_filter" "rejected_traffic" {
    id             = "cloud-portfolio-dev-rejected-traffic"
    log_group_name = "/aws/vpc/cloud-portfolio-dev-flow-logs"
    name           = "cloud-portfolio-dev-rejected-traffic"
    pattern        = "[version, account, eni, source, destination, srcport, destport, protocol, packets, bytes, windowstart, windowend, action=\"REJECT\", flowlogstatus]"

    metric_transformation {
        default_value = [90mnull[0m[0m
        dimensions    = {}
        name          = "RejectedTraffic"
        namespace     = "cloud-portfolio/dev/VPCFlowLogs"
        unit          = "None"
        value         = "1"
    }
}

# aws_cloudwatch_log_metric_filter.ssh_traffic:
resource "aws_cloudwatch_log_metric_filter" "ssh_traffic" {
    id             = "cloud-portfolio-dev-ssh-traffic"
    log_group_name = "/aws/vpc/cloud-portfolio-dev-flow-logs"
    name           = "cloud-portfolio-dev-ssh-traffic"
    pattern        = "[version, account, eni, source, destination, srcport, destport=\"22\", protocol=\"6\", packets, bytes, windowstart, windowend, action=\"ACCEPT\", flowlogstatus]"

    metric_transformation {
        default_value = [90mnull[0m[0m
        dimensions    = {}
        name          = "SSHTraffic"
        namespace     = "cloud-portfolio/dev/VPCFlowLogs"
        unit          = "None"
        value         = "1"
    }
}

# aws_cloudwatch_metric_alarm.alb_healthy_hosts:
resource "aws_cloudwatch_metric_alarm" "alb_healthy_hosts" {
    actions_enabled                       = true
    alarm_actions                         = [
        "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms",
    ]
    alarm_description                     = "Alert when we have less than 1 healthy host"
    alarm_name                            = "cloud-portfolio-dev-unhealthy-hosts"
    arn                                   = "arn:aws:cloudwatch:us-east-1:298393324887:alarm:cloud-portfolio-dev-unhealthy-hosts"
    comparison_operator                   = "LessThanThreshold"
    datapoints_to_alarm                   = 0
    dimensions                            = {
        "LoadBalancer" = "app/cloud-portfolio-dev-alb/6f936636eca84c08"
        "TargetGroup"  = "targetgroup/web-20251127183400100500000001/bdff4c0cb3f41491"
    }
    evaluate_low_sample_count_percentiles = [90mnull[0m[0m
    evaluation_periods                    = 2
    extended_statistic                    = [90mnull[0m[0m
    id                                    = "cloud-portfolio-dev-unhealthy-hosts"
    insufficient_data_actions             = []
    metric_name                           = "HealthyHostCount"
    namespace                             = "AWS/ApplicationELB"
    ok_actions                            = []
    period                                = 60
    statistic                             = "Average"
    tags                                  = {
        "Name" = "cloud-portfolio-dev-unhealthy-hosts-alarm"
    }
    tags_all                              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-unhealthy-hosts-alarm"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    threshold                             = 1
    threshold_metric_id                   = [90mnull[0m[0m
    treat_missing_data                    = "missing"
    unit                                  = [90mnull[0m[0m
}

# aws_cloudwatch_metric_alarm.api_5xx:
resource "aws_cloudwatch_metric_alarm" "api_5xx" {
    actions_enabled                       = true
    alarm_actions                         = [
        "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms",
    ]
    alarm_description                     = "API Gateway 5XX errors are too high"
    alarm_name                            = "cloud-portfolio-dev-api-5xx-errors"
    arn                                   = "arn:aws:cloudwatch:us-east-1:298393324887:alarm:cloud-portfolio-dev-api-5xx-errors"
    comparison_operator                   = "GreaterThanThreshold"
    datapoints_to_alarm                   = 0
    dimensions                            = {
        "ApiName" = "cloud-portfolio-dev-api"
    }
    evaluate_low_sample_count_percentiles = [90mnull[0m[0m
    evaluation_periods                    = 2
    extended_statistic                    = [90mnull[0m[0m
    id                                    = "cloud-portfolio-dev-api-5xx-errors"
    insufficient_data_actions             = []
    metric_name                           = "5XXError"
    namespace                             = "AWS/ApiGateway"
    ok_actions                            = []
    period                                = 300
    statistic                             = "Sum"
    tags                                  = {
        "Name" = "cloud-portfolio-dev-api-5xx-alarm"
    }
    tags_all                              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-api-5xx-alarm"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    threshold                             = 10
    threshold_metric_id                   = [90mnull[0m[0m
    treat_missing_data                    = "missing"
    unit                                  = [90mnull[0m[0m
}

# aws_cloudwatch_metric_alarm.cache_cpu:
resource "aws_cloudwatch_metric_alarm" "cache_cpu" {
    actions_enabled                       = true
    alarm_actions                         = [
        "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms",
    ]
    alarm_description                     = "ElastiCache CPU utilization is too high"
    alarm_name                            = "cloud-portfolio-dev-cache-high-cpu"
    arn                                   = "arn:aws:cloudwatch:us-east-1:298393324887:alarm:cloud-portfolio-dev-cache-high-cpu"
    comparison_operator                   = "GreaterThanThreshold"
    datapoints_to_alarm                   = 0
    dimensions                            = {
        "CacheClusterId" = "cloud-portfolio-dev-redis"
    }
    evaluate_low_sample_count_percentiles = [90mnull[0m[0m
    evaluation_periods                    = 2
    extended_statistic                    = [90mnull[0m[0m
    id                                    = "cloud-portfolio-dev-cache-high-cpu"
    insufficient_data_actions             = []
    metric_name                           = "CPUUtilization"
    namespace                             = "AWS/ElastiCache"
    ok_actions                            = []
    period                                = 300
    statistic                             = "Average"
    tags                                  = {
        "Name" = "cloud-portfolio-dev-cache-cpu-alarm"
    }
    tags_all                              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-cache-cpu-alarm"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    threshold                             = 75
    threshold_metric_id                   = [90mnull[0m[0m
    treat_missing_data                    = "missing"
    unit                                  = [90mnull[0m[0m
}

# aws_cloudwatch_metric_alarm.cache_memory:
resource "aws_cloudwatch_metric_alarm" "cache_memory" {
    actions_enabled                       = true
    alarm_actions                         = [
        "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms",
    ]
    alarm_description                     = "ElastiCache memory utilization is too high"
    alarm_name                            = "cloud-portfolio-dev-cache-high-memory"
    arn                                   = "arn:aws:cloudwatch:us-east-1:298393324887:alarm:cloud-portfolio-dev-cache-high-memory"
    comparison_operator                   = "GreaterThanThreshold"
    datapoints_to_alarm                   = 0
    dimensions                            = {
        "CacheClusterId" = "cloud-portfolio-dev-redis"
    }
    evaluate_low_sample_count_percentiles = [90mnull[0m[0m
    evaluation_periods                    = 2
    extended_statistic                    = [90mnull[0m[0m
    id                                    = "cloud-portfolio-dev-cache-high-memory"
    insufficient_data_actions             = []
    metric_name                           = "DatabaseMemoryUsagePercentage"
    namespace                             = "AWS/ElastiCache"
    ok_actions                            = []
    period                                = 300
    statistic                             = "Average"
    tags                                  = {
        "Name" = "cloud-portfolio-dev-cache-memory-alarm"
    }
    tags_all                              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-cache-memory-alarm"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    threshold                             = 90
    threshold_metric_id                   = [90mnull[0m[0m
    treat_missing_data                    = "missing"
    unit                                  = [90mnull[0m[0m
}

# aws_cloudwatch_metric_alarm.high_cpu:
resource "aws_cloudwatch_metric_alarm" "high_cpu" {
    actions_enabled                       = true
    alarm_actions                         = [
        "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms",
    ]
    alarm_description                     = "This metric monitors EC2 cpu utilization"
    alarm_name                            = "cloud-portfolio-dev-high-cpu"
    arn                                   = "arn:aws:cloudwatch:us-east-1:298393324887:alarm:cloud-portfolio-dev-high-cpu"
    comparison_operator                   = "GreaterThanThreshold"
    datapoints_to_alarm                   = 0
    dimensions                            = {
        "AutoScalingGroupName" = "cloud-portfolio-dev-web-asg"
    }
    evaluate_low_sample_count_percentiles = [90mnull[0m[0m
    evaluation_periods                    = 2
    extended_statistic                    = [90mnull[0m[0m
    id                                    = "cloud-portfolio-dev-high-cpu"
    insufficient_data_actions             = []
    metric_name                           = "CPUUtilization"
    namespace                             = "AWS/EC2"
    ok_actions                            = []
    period                                = 300
    statistic                             = "Average"
    tags                                  = {
        "Name" = "cloud-portfolio-dev-high-cpu-alarm"
    }
    tags_all                              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-high-cpu-alarm"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    threshold                             = 80
    threshold_metric_id                   = [90mnull[0m[0m
    treat_missing_data                    = "missing"
    unit                                  = [90mnull[0m[0m
}

# aws_cloudwatch_metric_alarm.high_rejected_traffic:
resource "aws_cloudwatch_metric_alarm" "high_rejected_traffic" {
    actions_enabled                       = true
    alarm_actions                         = [
        "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms",
    ]
    alarm_description                     = "High number of rejected network connections"
    alarm_name                            = "cloud-portfolio-dev-high-rejected-traffic"
    arn                                   = "arn:aws:cloudwatch:us-east-1:298393324887:alarm:cloud-portfolio-dev-high-rejected-traffic"
    comparison_operator                   = "GreaterThanThreshold"
    datapoints_to_alarm                   = 0
    dimensions                            = {}
    evaluate_low_sample_count_percentiles = [90mnull[0m[0m
    evaluation_periods                    = 2
    extended_statistic                    = [90mnull[0m[0m
    id                                    = "cloud-portfolio-dev-high-rejected-traffic"
    insufficient_data_actions             = []
    metric_name                           = "RejectedTraffic"
    namespace                             = "cloud-portfolio/dev/VPCFlowLogs"
    ok_actions                            = []
    period                                = 300
    statistic                             = "Sum"
    tags                                  = {
        "Name" = "cloud-portfolio-dev-rejected-traffic-alarm"
    }
    tags_all                              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-rejected-traffic-alarm"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    threshold                             = 100
    threshold_metric_id                   = [90mnull[0m[0m
    treat_missing_data                    = "missing"
    unit                                  = [90mnull[0m[0m
}

# aws_cloudwatch_metric_alarm.lambda_duration:
resource "aws_cloudwatch_metric_alarm" "lambda_duration" {
    actions_enabled                       = true
    alarm_actions                         = [
        "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms",
    ]
    alarm_description                     = "This metric monitors Lambda function duration"
    alarm_name                            = "cloud-portfolio-dev-lambda-duration"
    arn                                   = "arn:aws:cloudwatch:us-east-1:298393324887:alarm:cloud-portfolio-dev-lambda-duration"
    comparison_operator                   = "GreaterThanThreshold"
    datapoints_to_alarm                   = 0
    dimensions                            = {
        "FunctionName" = "cloud-portfolio-dev-api-processor"
    }
    evaluate_low_sample_count_percentiles = [90mnull[0m[0m
    evaluation_periods                    = 2
    extended_statistic                    = [90mnull[0m[0m
    id                                    = "cloud-portfolio-dev-lambda-duration"
    insufficient_data_actions             = []
    metric_name                           = "Duration"
    namespace                             = "AWS/Lambda"
    ok_actions                            = []
    period                                = 300
    statistic                             = "Average"
    tags                                  = {}
    tags_all                              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    threshold                             = 25000
    threshold_metric_id                   = [90mnull[0m[0m
    treat_missing_data                    = "missing"
    unit                                  = [90mnull[0m[0m
}

# aws_cloudwatch_metric_alarm.lambda_errors:
resource "aws_cloudwatch_metric_alarm" "lambda_errors" {
    actions_enabled                       = true
    alarm_actions                         = [
        "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms",
    ]
    alarm_description                     = "This metric monitors Lambda function errors"
    alarm_name                            = "cloud-portfolio-dev-lambda-errors"
    arn                                   = "arn:aws:cloudwatch:us-east-1:298393324887:alarm:cloud-portfolio-dev-lambda-errors"
    comparison_operator                   = "GreaterThanThreshold"
    datapoints_to_alarm                   = 0
    dimensions                            = {
        "FunctionName" = "cloud-portfolio-dev-api-processor"
    }
    evaluate_low_sample_count_percentiles = [90mnull[0m[0m
    evaluation_periods                    = 2
    extended_statistic                    = [90mnull[0m[0m
    id                                    = "cloud-portfolio-dev-lambda-errors"
    insufficient_data_actions             = []
    metric_name                           = "Errors"
    namespace                             = "AWS/Lambda"
    ok_actions                            = []
    period                                = 300
    statistic                             = "Sum"
    tags                                  = {}
    tags_all                              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    threshold                             = 5
    threshold_metric_id                   = [90mnull[0m[0m
    treat_missing_data                    = "missing"
    unit                                  = [90mnull[0m[0m
}

# aws_cloudwatch_metric_alarm.rds_cpu:
resource "aws_cloudwatch_metric_alarm" "rds_cpu" {
    actions_enabled                       = true
    alarm_actions                         = [
        "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms",
    ]
    alarm_description                     = "RDS instance high CPU"
    alarm_name                            = "cloud-portfolio-dev-rds-high-cpu"
    arn                                   = "arn:aws:cloudwatch:us-east-1:298393324887:alarm:cloud-portfolio-dev-rds-high-cpu"
    comparison_operator                   = "GreaterThanThreshold"
    datapoints_to_alarm                   = 0
    dimensions                            = {
        "DBInstanceIdentifier" = "cloud-portfolio-dev-mysql"
    }
    evaluate_low_sample_count_percentiles = [90mnull[0m[0m
    evaluation_periods                    = 2
    extended_statistic                    = [90mnull[0m[0m
    id                                    = "cloud-portfolio-dev-rds-high-cpu"
    insufficient_data_actions             = []
    metric_name                           = "CPUUtilization"
    namespace                             = "AWS/RDS"
    ok_actions                            = []
    period                                = 300
    statistic                             = "Average"
    tags                                  = {
        "Name" = "cloud-portfolio-dev-rds-cpu-alarm"
    }
    tags_all                              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-rds-cpu-alarm"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    threshold                             = 75
    threshold_metric_id                   = [90mnull[0m[0m
    treat_missing_data                    = "missing"
    unit                                  = [90mnull[0m[0m
}

# aws_cloudwatch_metric_alarm.rds_storage:
resource "aws_cloudwatch_metric_alarm" "rds_storage" {
    actions_enabled                       = true
    alarm_actions                         = [
        "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms",
    ]
    alarm_description                     = "RDS instance low storage"
    alarm_name                            = "cloud-portfolio-dev-rds-storage"
    arn                                   = "arn:aws:cloudwatch:us-east-1:298393324887:alarm:cloud-portfolio-dev-rds-storage"
    comparison_operator                   = "LessThanThreshold"
    datapoints_to_alarm                   = 0
    dimensions                            = {
        "DBInstanceIdentifier" = "cloud-portfolio-dev-mysql"
    }
    evaluate_low_sample_count_percentiles = [90mnull[0m[0m
    evaluation_periods                    = 1
    extended_statistic                    = [90mnull[0m[0m
    id                                    = "cloud-portfolio-dev-rds-storage"
    insufficient_data_actions             = []
    metric_name                           = "FreeStorageSpace"
    namespace                             = "AWS/RDS"
    ok_actions                            = []
    period                                = 300
    statistic                             = "Average"
    tags                                  = {
        "Name" = "cloud-portfolio-dev-rds-storage-alarm"
    }
    tags_all                              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-rds-storage-alarm"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    threshold                             = 1073741824
    threshold_metric_id                   = [90mnull[0m[0m
    treat_missing_data                    = "missing"
    unit                                  = [90mnull[0m[0m
}

# aws_db_instance.main:
resource "aws_db_instance" "main" {
    address                               = "cloud-portfolio-dev-mysql.cqlw6kgk0bbv.us-east-1.rds.amazonaws.com"
    allocated_storage                     = 20
    apply_immediately                     = true
    arn                                   = "arn:aws:rds:us-east-1:298393324887:db:cloud-portfolio-dev-mysql"
    auto_minor_version_upgrade            = true
    availability_zone                     = "us-east-1a"
    backup_retention_period               = 7
    backup_target                         = "region"
    backup_window                         = "03:00-04:00"
    ca_cert_identifier                    = "rds-ca-rsa2048-g1"
    character_set_name                    = [90mnull[0m[0m
    copy_tags_to_snapshot                 = false
    custom_iam_instance_profile           = [90mnull[0m[0m
    customer_owned_ip_enabled             = false
    database_insights_mode                = "standard"
    db_name                               = "cloudportfolio"
    db_subnet_group_name                  = "cloud-portfolio-dev-db-subnet-group"
    dedicated_log_volume                  = false
    delete_automated_backups              = true
    deletion_protection                   = false
    domain                                = [90mnull[0m[0m
    domain_auth_secret_arn                = [90mnull[0m[0m
    domain_dns_ips                        = []
    domain_fqdn                           = [90mnull[0m[0m
    domain_iam_role_name                  = [90mnull[0m[0m
    domain_ou                             = [90mnull[0m[0m
    enabled_cloudwatch_logs_exports       = []
    endpoint                              = "cloud-portfolio-dev-mysql.cqlw6kgk0bbv.us-east-1.rds.amazonaws.com:3306"
    engine                                = "mysql"
    engine_lifecycle_support              = "open-source-rds-extended-support"
    engine_version                        = "8.0"
    engine_version_actual                 = "8.0.43"
    hosted_zone_id                        = "Z2R2ITUGPM61AM"
    iam_database_authentication_enabled   = false
    id                                    = "db-U6VAHO5J4LTO2ERZZZN7IIUBG4"
    identifier                            = "cloud-portfolio-dev-mysql"
    identifier_prefix                     = [90mnull[0m[0m
    instance_class                        = "db.t3.micro"
    iops                                  = 3000
    kms_key_id                            = "arn:aws:kms:us-east-1:298393324887:key/9b6b606c-becd-4942-a9cb-340af600ca96"
    latest_restorable_time                = "2025-11-28T22:40:00Z"
    license_model                         = "general-public-license"
    listener_endpoint                     = []
    maintenance_window                    = "sun:04:00-sun:05:00"
    master_user_secret                    = []
    max_allocated_storage                 = 100
    monitoring_interval                   = 0
    monitoring_role_arn                   = [90mnull[0m[0m
    multi_az                              = false
    nchar_character_set_name              = [90mnull[0m[0m
    network_type                          = "IPV4"
    option_group_name                     = "default:mysql-8-0"
    parameter_group_name                  = "cloud-portfolio-dev-mysql-params"
    password                              = (sensitive value)
    password_wo                           = (write-only attribute)
    performance_insights_enabled          = false
    performance_insights_kms_key_id       = [90mnull[0m[0m
    performance_insights_retention_period = 0
    port                                  = 3306
    publicly_accessible                   = false
    replica_mode                          = [90mnull[0m[0m
    replicas                              = []
    replicate_source_db                   = [90mnull[0m[0m
    resource_id                           = "db-U6VAHO5J4LTO2ERZZZN7IIUBG4"
    skip_final_snapshot                   = true
    status                                = "available"
    storage_encrypted                     = true
    storage_throughput                    = 125
    storage_type                          = "gp3"
    tags                                  = {
        "BackupEnabled" = "true"
        "Name"          = "cloud-portfolio-dev-mysql"
    }
    tags_all                              = {
        "BackupEnabled" = "true"
        "Environment"   = "dev"
        "ManagedBy"     = "terraform"
        "Name"          = "cloud-portfolio-dev-mysql"
        "Owner"         = "jacobspeart@gmail.com"
        "Project"       = "cloud-portfolio"
    }
    timezone                              = [90mnull[0m[0m
    username                              = "admin"
    vpc_security_group_ids                = [
        "sg-042031d2056cef0a8",
    ]
}

# aws_db_parameter_group.main:
resource "aws_db_parameter_group" "main" {
    arn          = "arn:aws:rds:us-east-1:298393324887:pg:cloud-portfolio-dev-mysql-params"
    description  = "Managed by Terraform"
    family       = "mysql8.0"
    id           = "cloud-portfolio-dev-mysql-params"
    name         = "cloud-portfolio-dev-mysql-params"
    name_prefix  = [90mnull[0m[0m
    skip_destroy = false
    tags         = {
        "Name" = "cloud-portfolio-dev-mysql-params"
    }
    tags_all     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-mysql-params"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }

    parameter {
        apply_method = "immediate"
        name         = "character_set_server"
        value        = "utf8mb4"
    }
    parameter {
        apply_method = "immediate"
        name         = "collation_server"
        value        = "utf8mb4_unicode_ci"
    }
    parameter {
        apply_method = "immediate"
        name         = "max_connections"
        value        = "150"
    }
}

# aws_ecr_lifecycle_policy.app:
resource "aws_ecr_lifecycle_policy" "app" {
    id          = "cloud-portfolio-dev-app"
    policy      = jsonencode(
        {
            rules = [
                {
                    action       = {
                        type = "expire"
                    }
                    description  = "Keep last 10 images"
                    rulePriority = 1
                    selection    = {
                        countNumber = 10
                        countType   = "imageCountMoreThan"
                        tagStatus   = "any"
                    }
                },
            ]
        }
    )
    registry_id = "298393324887"
    repository  = "cloud-portfolio-dev-app"
}

# aws_ecr_repository.app:
resource "aws_ecr_repository" "app" {
    arn                  = "arn:aws:ecr:us-east-1:298393324887:repository/cloud-portfolio-dev-app"
    id                   = "cloud-portfolio-dev-app"
    image_tag_mutability = "MUTABLE"
    name                 = "cloud-portfolio-dev-app"
    registry_id          = "298393324887"
    repository_url       = "298393324887.dkr.ecr.us-east-1.amazonaws.com/cloud-portfolio-dev-app"
    tags                 = {
        "Name" = "cloud-portfolio-dev-ecr"
    }
    tags_all             = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-ecr"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }

    encryption_configuration {
        encryption_type = "AES256"
        kms_key         = [90mnull[0m[0m
    }

    image_scanning_configuration {
        scan_on_push = true
    }
}

# aws_ecr_repository_policy.app:
resource "aws_ecr_repository_policy" "app" {
    id          = "cloud-portfolio-dev-app"
    policy      = jsonencode(
        {
            Statement = [
                {
                    Action    = [
                        "ecr:GetDownloadUrlForLayer",
                        "ecr:BatchGetImage",
                        "ecr:BatchCheckLayerAvailability",
                        "ecr:PutImage",
                        "ecr:InitiateLayerUpload",
                        "ecr:UploadLayerPart",
                        "ecr:CompleteLayerUpload",
                        "ecr:DescribeImages",
                        "ecr:ListImages",
                    ]
                    Effect    = "Allow"
                    Principal = {
                        AWS = "arn:aws:iam::298393324887:root"
                    }
                    Sid       = "AllowPushPull"
                },
            ]
            Version   = "2012-10-17"
        }
    )
    registry_id = "298393324887"
    repository  = "cloud-portfolio-dev-app"
}

# aws_ecs_cluster.main:
resource "aws_ecs_cluster" "main" {
    arn      = "arn:aws:ecs:us-east-1:298393324887:cluster/cloud-portfolio-dev-cluster"
    id       = "arn:aws:ecs:us-east-1:298393324887:cluster/cloud-portfolio-dev-cluster"
    name     = "cloud-portfolio-dev-cluster"
    tags     = {
        "Name" = "cloud-portfolio-dev-ecs-cluster"
    }
    tags_all = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-ecs-cluster"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }

    setting {
        name  = "containerInsights"
        value = "enabled"
    }
}

# aws_ecs_cluster_capacity_providers.main:
resource "aws_ecs_cluster_capacity_providers" "main" {
    capacity_providers = [
        "FARGATE",
        "FARGATE_SPOT",
    ]
    cluster_name       = "cloud-portfolio-dev-cluster"
    id                 = "cloud-portfolio-dev-cluster"

    default_capacity_provider_strategy {
        base              = 1
        capacity_provider = "FARGATE_SPOT"
        weight            = 1
    }
}

# aws_ecs_service.web:
resource "aws_ecs_service" "web" {
    availability_zone_rebalancing      = "DISABLED"
    cluster                            = "arn:aws:ecs:us-east-1:298393324887:cluster/cloud-portfolio-dev-cluster"
    deployment_maximum_percent         = 200
    deployment_minimum_healthy_percent = 100
    desired_count                      = 2
    enable_ecs_managed_tags            = false
    enable_execute_command             = true
    health_check_grace_period_seconds  = 0
    iam_role                           = "/aws-service-role/ecs.amazonaws.com/AWSServiceRoleForECS"
    id                                 = "arn:aws:ecs:us-east-1:298393324887:service/cloud-portfolio-dev-cluster/cloud-portfolio-dev-web-service"
    launch_type                        = "FARGATE"
    name                               = "cloud-portfolio-dev-web-service"
    platform_version                   = "LATEST"
    propagate_tags                     = "NONE"
    scheduling_strategy                = "REPLICA"
    tags                               = {
        "Name" = "cloud-portfolio-dev-web-service"
    }
    tags_all                           = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-web-service"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    task_definition                    = "arn:aws:ecs:us-east-1:298393324887:task-definition/cloud-portfolio-dev-web:3"
    triggers                           = {}
    wait_for_steady_state              = false

    deployment_circuit_breaker {
        enable   = false
        rollback = false
    }

    deployment_controller {
        type = "ECS"
    }

    load_balancer {
        container_name   = "cloud-portfolio-app"
        container_port   = 8080
        elb_name         = [90mnull[0m[0m
        target_group_arn = "arn:aws:elasticloadbalancing:us-east-1:298393324887:targetgroup/cloud-portfolio-dev-ecs-tg/d911b91411217c9b"
    }

    network_configuration {
        assign_public_ip = false
        security_groups  = [
            "sg-0abb7c3da6cca6607",
        ]
        subnets          = [
            "subnet-02d40ebb9d81672cb",
            "subnet-08d9f4a05dc2f8622",
        ]
    }

    service_registries {
        container_name = [90mnull[0m[0m
        container_port = 0
        port           = 0
        registry_arn   = "arn:aws:servicediscovery:us-east-1:298393324887:service/srv-tk36wtks22bi3kfu"
    }
}

# aws_ecs_task_definition.web:
resource "aws_ecs_task_definition" "web" {
    arn                      = "arn:aws:ecs:us-east-1:298393324887:task-definition/cloud-portfolio-dev-web:3"
    arn_without_revision     = "arn:aws:ecs:us-east-1:298393324887:task-definition/cloud-portfolio-dev-web"
    container_definitions    = jsonencode(
        [
            {
                environment      = [
                    {
                        name  = "DB_HOST"
                        value = "cloud-portfolio-dev-mysql.cqlw6kgk0bbv.us-east-1.rds.amazonaws.com"
                    },
                    {
                        name  = "ENVIRONMENT"
                        value = "dev"
                    },
                    {
                        name  = "PROJECT"
                        value = "cloud-portfolio"
                    },
                    {
                        name  = "REDIS_HOST"
                        value = "cloud-portfolio-dev-redis.l8bwll.0001.use1.cache.amazonaws.com"
                    },
                    {
                        name  = "S3_BUCKET"
                        value = "cloud-portfolio-dev-static-g8al5lmt"
                    },
                ]
                essential        = true
                healthCheck      = {
                    command     = [
                        "CMD-SHELL",
                        "curl -f http://localhost:8080/health || exit 1",
                    ]
                    interval    = 30
                    retries     = 3
                    startPeriod = 60
                    timeout     = 5
                }
                image            = "298393324887.dkr.ecr.us-east-1.amazonaws.com/cloud-portfolio-dev-app:latest"
                logConfiguration = {
                    logDriver = "awslogs"
                    options   = {
                        awslogs-group         = "/ecs/cloud-portfolio-dev"
                        awslogs-region        = "us-east-1"
                        awslogs-stream-prefix = "app"
                    }
                }
                mountPoints      = []
                name             = "cloud-portfolio-app"
                portMappings     = [
                    {
                        containerPort = 8080
                        hostPort      = 8080
                        protocol      = "tcp"
                    },
                ]
                systemControls   = []
                volumesFrom      = []
            },
            {
                cpu              = 32
                environment      = []
                essential        = false
                image            = "public.ecr.aws/xray/aws-xray-daemon:latest"
                logConfiguration = {
                    logDriver = "awslogs"
                    options   = {
                        awslogs-group         = "/ecs/cloud-portfolio-dev"
                        awslogs-region        = "us-east-1"
                        awslogs-stream-prefix = "xray"
                    }
                }
                memory           = 256
                mountPoints      = []
                name             = "xray-daemon"
                portMappings     = [
                    {
                        containerPort = 2000
                        hostPort      = 2000
                        protocol      = "udp"
                    },
                ]
                systemControls   = []
                volumesFrom      = []
            },
        ]
    )
    cpu                      = "512"
    enable_fault_injection   = false
    execution_role_arn       = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-ecs-task-execution"
    family                   = "cloud-portfolio-dev-web"
    id                       = "cloud-portfolio-dev-web"
    ipc_mode                 = [90mnull[0m[0m
    memory                   = "1024"
    network_mode             = "awsvpc"
    pid_mode                 = [90mnull[0m[0m
    requires_compatibilities = [
        "FARGATE",
    ]
    revision                 = 3
    skip_destroy             = false
    tags                     = {
        "Name" = "cloud-portfolio-dev-web-task"
    }
    tags_all                 = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-web-task"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    task_role_arn            = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-ecs-task"
    track_latest             = false
}

# aws_elasticache_cluster.main:
resource "aws_elasticache_cluster" "main" {
    arn                        = "arn:aws:elasticache:us-east-1:298393324887:cluster:cloud-portfolio-dev-redis"
    auto_minor_version_upgrade = "true"
    availability_zone          = "us-east-1b"
    az_mode                    = "single-az"
    cache_nodes                = [
        {
            address           = "cloud-portfolio-dev-redis.l8bwll.0001.use1.cache.amazonaws.com"
            availability_zone = "us-east-1b"
            id                = "0001"
            outpost_arn       = [90mnull[0m[0m
            port              = 6379
        },
    ]
    cluster_id                 = "cloud-portfolio-dev-redis"
    engine                     = "redis"
    engine_version             = "7.1"
    engine_version_actual      = "7.1.0"
    id                         = "cloud-portfolio-dev-redis"
    ip_discovery               = "ipv4"
    maintenance_window         = "sun:05:00-sun:06:00"
    network_type               = "ipv4"
    node_type                  = "cache.t3.micro"
    num_cache_nodes            = 1
    parameter_group_name       = "cloud-portfolio-dev-redis-params"
    port                       = 6379
    preferred_outpost_arn      = [90mnull[0m[0m
    replication_group_id       = [90mnull[0m[0m
    security_group_ids         = [
        "sg-0434c543000d36fa1",
    ]
    snapshot_retention_limit   = 5
    snapshot_window            = "04:00-05:00"
    subnet_group_name          = "cloud-portfolio-dev-cache-subnet"
    tags                       = {
        "Name" = "cloud-portfolio-dev-redis"
    }
    tags_all                   = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-redis"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    transit_encryption_enabled = false
}

# aws_elasticache_parameter_group.main:
resource "aws_elasticache_parameter_group" "main" {
    arn         = "arn:aws:elasticache:us-east-1:298393324887:parametergroup:cloud-portfolio-dev-redis-params"
    description = "Managed by Terraform"
    family      = "redis7"
    id          = "cloud-portfolio-dev-redis-params"
    name        = "cloud-portfolio-dev-redis-params"
    tags        = {
        "Name" = "cloud-portfolio-dev-redis-params"
    }
    tags_all    = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-redis-params"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }

    parameter {
        name  = "maxmemory-policy"
        value = "allkeys-lru"
    }
}

# aws_elasticache_subnet_group.main:
resource "aws_elasticache_subnet_group" "main" {
    arn         = "arn:aws:elasticache:us-east-1:298393324887:subnetgroup:cloud-portfolio-dev-cache-subnet"
    description = "Managed by Terraform"
    id          = "cloud-portfolio-dev-cache-subnet"
    name        = "cloud-portfolio-dev-cache-subnet"
    subnet_ids  = [
        "subnet-02d40ebb9d81672cb",
        "subnet-08d9f4a05dc2f8622",
    ]
    tags        = {
        "Name" = "cloud-portfolio-dev-cache-subnet"
    }
    tags_all    = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-cache-subnet"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    vpc_id      = "vpc-02fbf198865b54295"
}

# aws_flow_log.main:
resource "aws_flow_log" "main" {
    arn                        = "arn:aws:ec2:us-east-1:298393324887:vpc-flow-log/fl-0d99eb424dbfa5129"
    deliver_cross_account_role = [90mnull[0m[0m
    iam_role_arn               = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-vpc-flow-logs-role"
    id                         = "fl-0d99eb424dbfa5129"
    log_destination            = "arn:aws:logs:us-east-1:298393324887:log-group:/aws/vpc/cloud-portfolio-dev-flow-logs"
    log_destination_type       = "cloud-watch-logs"
    log_format                 = "${version} ${account-id} ${interface-id} ${srcaddr} ${dstaddr} ${srcport} ${dstport} ${protocol} ${packets} ${bytes} ${start} ${end} ${action} ${log-status}"
    log_group_name             = "/aws/vpc/cloud-portfolio-dev-flow-logs"
    max_aggregation_interval   = 600
    tags                       = {
        "Name" = "cloud-portfolio-dev-flow-logs"
    }
    tags_all                   = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-flow-logs"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    traffic_type               = "ALL"
    vpc_id                     = "vpc-02fbf198865b54295"
}

# aws_iam_instance_profile.ec2_profile:
resource "aws_iam_instance_profile" "ec2_profile" {
    arn         = "arn:aws:iam::298393324887:instance-profile/cloud-portfolio-dev-ec2-profile"
    create_date = "2025-11-27T18:23:32Z"
    id          = "cloud-portfolio-dev-ec2-profile"
    name        = "cloud-portfolio-dev-ec2-profile"
    name_prefix = [90mnull[0m[0m
    path        = "/"
    role        = "cloud-portfolio-dev-ec2-role"
    tags        = {}
    tags_all    = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    unique_id   = "AIPAUK6NAZVLSRJ7HLGAB"
}

# aws_iam_role.api_gateway_cloudwatch:
resource "aws_iam_role" "api_gateway_cloudwatch" {
    arn                   = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-api-gateway-cloudwatch"
    assume_role_policy    = jsonencode(
        {
            Statement = [
                {
                    Action    = "sts:AssumeRole"
                    Effect    = "Allow"
                    Principal = {
                        Service = "apigateway.amazonaws.com"
                    }
                },
            ]
            Version   = "2012-10-17"
        }
    )
    create_date           = "2025-11-28T20:42:03Z"
    description           = [90mnull[0m[0m
    force_detach_policies = false
    id                    = "cloud-portfolio-dev-api-gateway-cloudwatch"
    managed_policy_arns   = [
        "arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs",
    ]
    max_session_duration  = 3600
    name                  = "cloud-portfolio-dev-api-gateway-cloudwatch"
    name_prefix           = [90mnull[0m[0m
    path                  = "/"
    permissions_boundary  = [90mnull[0m[0m
    tags                  = {
        "Name" = "cloud-portfolio-dev-api-gateway-cloudwatch-role"
    }
    tags_all              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-api-gateway-cloudwatch-role"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    unique_id             = "AROAUK6NAZVLST3DBALXJ"
}

# aws_iam_role.backup:
resource "aws_iam_role" "backup" {
    arn                   = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-backup-role"
    assume_role_policy    = jsonencode(
        {
            Statement = [
                {
                    Action    = "sts:AssumeRole"
                    Effect    = "Allow"
                    Principal = {
                        Service = "backup.amazonaws.com"
                    }
                },
            ]
            Version   = "2012-10-17"
        }
    )
    create_date           = "2025-11-28T21:41:03Z"
    description           = "IAM role for AWS Backup service"
    force_detach_policies = false
    id                    = "cloud-portfolio-dev-backup-role"
    managed_policy_arns   = [
        "arn:aws:iam::aws:policy/service-role/AWSBackupServiceRolePolicyForBackup",
        "arn:aws:iam::aws:policy/service-role/AWSBackupServiceRolePolicyForRestores",
    ]
    max_session_duration  = 3600
    name                  = "cloud-portfolio-dev-backup-role"
    name_prefix           = [90mnull[0m[0m
    path                  = "/"
    permissions_boundary  = [90mnull[0m[0m
    tags                  = {
        "Name" = "cloud-portfolio-dev-backup-role"
    }
    tags_all              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-backup-role"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    unique_id             = "AROAUK6NAZVL7Y6JIAJBM"
}

# aws_iam_role.ec2_role:
resource "aws_iam_role" "ec2_role" {
    arn                   = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-ec2-role"
    assume_role_policy    = jsonencode(
        {
            Statement = [
                {
                    Action    = "sts:AssumeRole"
                    Effect    = "Allow"
                    Principal = {
                        Service = "ec2.amazonaws.com"
                    }
                },
            ]
            Version   = "2012-10-17"
        }
    )
    create_date           = "2025-11-27T18:23:31Z"
    description           = [90mnull[0m[0m
    force_detach_policies = false
    id                    = "cloud-portfolio-dev-ec2-role"
    managed_policy_arns   = [
        "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore",
        "arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy",
    ]
    max_session_duration  = 3600
    name                  = "cloud-portfolio-dev-ec2-role"
    name_prefix           = [90mnull[0m[0m
    path                  = "/"
    permissions_boundary  = [90mnull[0m[0m
    tags                  = {
        "Name" = "cloud-portfolio-dev-ec2-role"
    }
    tags_all              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-ec2-role"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    unique_id             = "AROAUK6NAZVL23FGB2B7H"
}

# aws_iam_role.ecs_task:
resource "aws_iam_role" "ecs_task" {
    arn                   = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-ecs-task"
    assume_role_policy    = jsonencode(
        {
            Statement = [
                {
                    Action    = "sts:AssumeRole"
                    Effect    = "Allow"
                    Principal = {
                        Service = "ecs-tasks.amazonaws.com"
                    }
                },
            ]
            Version   = "2012-10-17"
        }
    )
    create_date           = "2025-11-28T20:29:50Z"
    description           = [90mnull[0m[0m
    force_detach_policies = false
    id                    = "cloud-portfolio-dev-ecs-task"
    managed_policy_arns   = [
        "arn:aws:iam::aws:policy/AWSXRayDaemonWriteAccess",
    ]
    max_session_duration  = 3600
    name                  = "cloud-portfolio-dev-ecs-task"
    name_prefix           = [90mnull[0m[0m
    path                  = "/"
    permissions_boundary  = [90mnull[0m[0m
    tags                  = {
        "Name" = "cloud-portfolio-dev-ecs-task-role"
    }
    tags_all              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-ecs-task-role"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    unique_id             = "AROAUK6NAZVLR3RFTBOQQ"

    inline_policy {
        name   = "cloud-portfolio-dev-ecs-task-policy"
        policy = jsonencode(
            {
                Statement = [
                    {
                        Action   = [
                            "s3:GetObject",
                            "s3:PutObject",
                        ]
                        Effect   = "Allow"
                        Resource = "arn:aws:s3:::cloud-portfolio-dev-static-g8al5lmt/*"
                    },
                    {
                        Action   = [
                            "secretsmanager:GetSecretValue",
                        ]
                        Effect   = "Allow"
                        Resource = "arn:aws:secretsmanager:us-east-1:298393324887:secret:cloud-portfolio-dev-db-password-20251128034435547900000001-R6XecG"
                    },
                    {
                        Action   = [
                            "ssm:GetParameter",
                            "ssm:GetParameters",
                        ]
                        Effect   = "Allow"
                        Resource = "arn:aws:ssm:us-east-1:*:parameter/cloud-portfolio/dev/*"
                    },
                ]
                Version   = "2012-10-17"
            }
        )
    }
}

# aws_iam_role.ecs_task_execution:
resource "aws_iam_role" "ecs_task_execution" {
    arn                   = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-ecs-task-execution"
    assume_role_policy    = jsonencode(
        {
            Statement = [
                {
                    Action    = "sts:AssumeRole"
                    Effect    = "Allow"
                    Principal = {
                        Service = "ecs-tasks.amazonaws.com"
                    }
                },
            ]
            Version   = "2012-10-17"
        }
    )
    create_date           = "2025-11-28T20:29:51Z"
    description           = [90mnull[0m[0m
    force_detach_policies = false
    id                    = "cloud-portfolio-dev-ecs-task-execution"
    managed_policy_arns   = [
        "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
    ]
    max_session_duration  = 3600
    name                  = "cloud-portfolio-dev-ecs-task-execution"
    name_prefix           = [90mnull[0m[0m
    path                  = "/"
    permissions_boundary  = [90mnull[0m[0m
    tags                  = {
        "Name" = "cloud-portfolio-dev-ecs-task-execution-role"
    }
    tags_all              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-ecs-task-execution-role"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    unique_id             = "AROAUK6NAZVLRCO2XFY5I"
}

# aws_iam_role.github_actions:
resource "aws_iam_role" "github_actions" {
    arn                   = "arn:aws:iam::298393324887:role/cloud-portfolio-github-actions-role"
    assume_role_policy    = jsonencode(
        {
            Statement = [
                {
                    Action    = "sts:AssumeRoleWithWebIdentity"
                    Condition = {
                        StringEquals = {
                            "token.actions.githubusercontent.com:aud" = "sts.amazonaws.com"
                        }
                        StringLike   = {
                            "token.actions.githubusercontent.com:sub" = "repo:jacobpeart-cyber/cloud-infrastructure-portfolio:*"
                        }
                    }
                    Effect    = "Allow"
                    Principal = {
                        Federated = "arn:aws:iam::298393324887:oidc-provider/token.actions.githubusercontent.com"
                    }
                },
            ]
            Version   = "2012-10-17"
        }
    )
    create_date           = "2025-11-28T20:53:32Z"
    description           = "Role for GitHub Actions to deploy Terraform infrastructure"
    force_detach_policies = false
    id                    = "cloud-portfolio-github-actions-role"
    managed_policy_arns   = [
        "arn:aws:iam::aws:policy/AdministratorAccess",
    ]
    max_session_duration  = 3600
    name                  = "cloud-portfolio-github-actions-role"
    name_prefix           = [90mnull[0m[0m
    path                  = "/"
    permissions_boundary  = [90mnull[0m[0m
    tags                  = {
        "Name" = "cloud-portfolio-github-actions-role"
    }
    tags_all              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-github-actions-role"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    unique_id             = "AROAUK6NAZVLQQVMYVHQL"
}

# aws_iam_role.lambda_api_processor:
resource "aws_iam_role" "lambda_api_processor" {
    arn                   = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-lambda-api-processor"
    assume_role_policy    = jsonencode(
        {
            Statement = [
                {
                    Action    = "sts:AssumeRole"
                    Effect    = "Allow"
                    Principal = {
                        Service = "lambda.amazonaws.com"
                    }
                },
            ]
            Version   = "2012-10-17"
        }
    )
    create_date           = "2025-11-28T21:41:03Z"
    description           = "IAM role for Lambda API processor function"
    force_detach_policies = false
    id                    = "cloud-portfolio-dev-lambda-api-processor"
    managed_policy_arns   = [
        "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
    ]
    max_session_duration  = 3600
    name                  = "cloud-portfolio-dev-lambda-api-processor"
    name_prefix           = [90mnull[0m[0m
    path                  = "/"
    permissions_boundary  = [90mnull[0m[0m
    tags                  = {
        "Name" = "cloud-portfolio-dev-lambda-api-processor"
    }
    tags_all              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-lambda-api-processor"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    unique_id             = "AROAUK6NAZVLSUPBJZLMV"

    inline_policy {
        name   = "cloud-portfolio-dev-lambda-vpc-policy"
        policy = jsonencode(
            {
                Statement = [
                    {
                        Action   = [
                            "ec2:CreateNetworkInterface",
                            "ec2:DescribeNetworkInterfaces",
                            "ec2:DeleteNetworkInterface",
                            "ec2:AssignPrivateIpAddresses",
                            "ec2:UnassignPrivateIpAddresses",
                        ]
                        Effect   = "Allow"
                        Resource = "*"
                    },
                    {
                        Action   = [
                            "ssm:GetParameter",
                            "ssm:GetParameters",
                        ]
                        Effect   = "Allow"
                        Resource = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/*"
                    },
                ]
                Version   = "2012-10-17"
            }
        )
    }
}

# aws_iam_role.lambda_edge:
resource "aws_iam_role" "lambda_edge" {
    arn                   = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-lambda-edge-role"
    assume_role_policy    = jsonencode(
        {
            Statement = [
                {
                    Action    = "sts:AssumeRole"
                    Effect    = "Allow"
                    Principal = {
                        Service = [
                            "lambda.amazonaws.com",
                            "edgelambda.amazonaws.com",
                        ]
                    }
                },
            ]
            Version   = "2012-10-17"
        }
    )
    create_date           = "2025-11-28T20:29:50Z"
    description           = [90mnull[0m[0m
    force_detach_policies = false
    id                    = "cloud-portfolio-dev-lambda-edge-role"
    managed_policy_arns   = [
        "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
    ]
    max_session_duration  = 3600
    name                  = "cloud-portfolio-dev-lambda-edge-role"
    name_prefix           = [90mnull[0m[0m
    path                  = "/"
    permissions_boundary  = [90mnull[0m[0m
    tags                  = {
        "Name" = "cloud-portfolio-dev-lambda-edge-role"
    }
    tags_all              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-lambda-edge-role"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    unique_id             = "AROAUK6NAZVLVNXHPJPE3"
}

# aws_iam_role.vpc_flow_logs:
resource "aws_iam_role" "vpc_flow_logs" {
    arn                   = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-vpc-flow-logs-role"
    assume_role_policy    = jsonencode(
        {
            Statement = [
                {
                    Action    = "sts:AssumeRole"
                    Effect    = "Allow"
                    Principal = {
                        Service = "vpc-flow-logs.amazonaws.com"
                    }
                },
            ]
            Version   = "2012-10-17"
        }
    )
    create_date           = "2025-11-28T20:29:51Z"
    description           = [90mnull[0m[0m
    force_detach_policies = false
    id                    = "cloud-portfolio-dev-vpc-flow-logs-role"
    managed_policy_arns   = []
    max_session_duration  = 3600
    name                  = "cloud-portfolio-dev-vpc-flow-logs-role"
    name_prefix           = [90mnull[0m[0m
    path                  = "/"
    permissions_boundary  = [90mnull[0m[0m
    tags                  = {
        "Name" = "cloud-portfolio-dev-vpc-flow-logs-role"
    }
    tags_all              = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-vpc-flow-logs-role"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    unique_id             = "AROAUK6NAZVL5WQLQQ5XH"

    inline_policy {
        name   = "cloud-portfolio-dev-vpc-flow-logs-policy"
        policy = jsonencode(
            {
                Statement = [
                    {
                        Action   = [
                            "logs:CreateLogGroup",
                            "logs:CreateLogStream",
                            "logs:PutLogEvents",
                            "logs:DescribeLogGroups",
                            "logs:DescribeLogStreams",
                        ]
                        Effect   = "Allow"
                        Resource = "*"
                    },
                ]
                Version   = "2012-10-17"
            }
        )
    }
}

# aws_iam_role_policy.ecs_task:
resource "aws_iam_role_policy" "ecs_task" {
    id          = "cloud-portfolio-dev-ecs-task:cloud-portfolio-dev-ecs-task-policy"
    name        = "cloud-portfolio-dev-ecs-task-policy"
    name_prefix = [90mnull[0m[0m
    policy      = jsonencode(
        {
            Statement = [
                {
                    Action   = [
                        "s3:GetObject",
                        "s3:PutObject",
                    ]
                    Effect   = "Allow"
                    Resource = "arn:aws:s3:::cloud-portfolio-dev-static-g8al5lmt/*"
                },
                {
                    Action   = [
                        "secretsmanager:GetSecretValue",
                    ]
                    Effect   = "Allow"
                    Resource = "arn:aws:secretsmanager:us-east-1:298393324887:secret:cloud-portfolio-dev-db-password-20251128034435547900000001-R6XecG"
                },
                {
                    Action   = [
                        "ssm:GetParameter",
                        "ssm:GetParameters",
                    ]
                    Effect   = "Allow"
                    Resource = "arn:aws:ssm:us-east-1:*:parameter/cloud-portfolio/dev/*"
                },
            ]
            Version   = "2012-10-17"
        }
    )
    role        = "cloud-portfolio-dev-ecs-task"
}

# aws_iam_role_policy.lambda_api_processor_vpc:
resource "aws_iam_role_policy" "lambda_api_processor_vpc" {
    id          = "cloud-portfolio-dev-lambda-api-processor:cloud-portfolio-dev-lambda-vpc-policy"
    name        = "cloud-portfolio-dev-lambda-vpc-policy"
    name_prefix = [90mnull[0m[0m
    policy      = jsonencode(
        {
            Statement = [
                {
                    Action   = [
                        "ec2:CreateNetworkInterface",
                        "ec2:DescribeNetworkInterfaces",
                        "ec2:DeleteNetworkInterface",
                        "ec2:AssignPrivateIpAddresses",
                        "ec2:UnassignPrivateIpAddresses",
                    ]
                    Effect   = "Allow"
                    Resource = "*"
                },
                {
                    Action   = [
                        "ssm:GetParameter",
                        "ssm:GetParameters",
                    ]
                    Effect   = "Allow"
                    Resource = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/*"
                },
            ]
            Version   = "2012-10-17"
        }
    )
    role        = "cloud-portfolio-dev-lambda-api-processor"
}

# aws_iam_role_policy.vpc_flow_logs:
resource "aws_iam_role_policy" "vpc_flow_logs" {
    id          = "cloud-portfolio-dev-vpc-flow-logs-role:cloud-portfolio-dev-vpc-flow-logs-policy"
    name        = "cloud-portfolio-dev-vpc-flow-logs-policy"
    name_prefix = [90mnull[0m[0m
    policy      = jsonencode(
        {
            Statement = [
                {
                    Action   = [
                        "logs:CreateLogGroup",
                        "logs:CreateLogStream",
                        "logs:PutLogEvents",
                        "logs:DescribeLogGroups",
                        "logs:DescribeLogStreams",
                    ]
                    Effect   = "Allow"
                    Resource = "*"
                },
            ]
            Version   = "2012-10-17"
        }
    )
    role        = "cloud-portfolio-dev-vpc-flow-logs-role"
}

# aws_iam_role_policy_attachment.api_gateway_cloudwatch:
resource "aws_iam_role_policy_attachment" "api_gateway_cloudwatch" {
    id         = "cloud-portfolio-dev-api-gateway-cloudwatch-20251128204204415600000001"
    policy_arn = "arn:aws:iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"
    role       = "cloud-portfolio-dev-api-gateway-cloudwatch"
}

# aws_iam_role_policy_attachment.backup:
resource "aws_iam_role_policy_attachment" "backup" {
    id         = "cloud-portfolio-dev-backup-role-20251128214104533800000003"
    policy_arn = "arn:aws:iam::aws:policy/service-role/AWSBackupServiceRolePolicyForBackup"
    role       = "cloud-portfolio-dev-backup-role"
}

# aws_iam_role_policy_attachment.backup_restore:
resource "aws_iam_role_policy_attachment" "backup_restore" {
    id         = "cloud-portfolio-dev-backup-role-20251128214104405800000002"
    policy_arn = "arn:aws:iam::aws:policy/service-role/AWSBackupServiceRolePolicyForRestores"
    role       = "cloud-portfolio-dev-backup-role"
}

# aws_iam_role_policy_attachment.cloudwatch_policy:
resource "aws_iam_role_policy_attachment" "cloudwatch_policy" {
    id         = "cloud-portfolio-dev-ec2-role-20251127182334178100000002"
    policy_arn = "arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"
    role       = "cloud-portfolio-dev-ec2-role"
}

# aws_iam_role_policy_attachment.ecs_task_execution:
resource "aws_iam_role_policy_attachment" "ecs_task_execution" {
    id         = "cloud-portfolio-dev-ecs-task-execution-20251128202953028400000002"
    policy_arn = "arn:aws:iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
    role       = "cloud-portfolio-dev-ecs-task-execution"
}

# aws_iam_role_policy_attachment.ecs_xray:
resource "aws_iam_role_policy_attachment" "ecs_xray" {
    id         = "cloud-portfolio-dev-ecs-task-20251128215759534700000002"
    policy_arn = "arn:aws:iam::aws:policy/AWSXRayDaemonWriteAccess"
    role       = "cloud-portfolio-dev-ecs-task"
}

# aws_iam_role_policy_attachment.github_actions_admin:
resource "aws_iam_role_policy_attachment" "github_actions_admin" {
    id         = "cloud-portfolio-github-actions-role-20251128205333621700000001"
    policy_arn = "arn:aws:iam::aws:policy/AdministratorAccess"
    role       = "cloud-portfolio-github-actions-role"
}

# aws_iam_role_policy_attachment.lambda_api_processor_basic:
resource "aws_iam_role_policy_attachment" "lambda_api_processor_basic" {
    id         = "cloud-portfolio-dev-lambda-api-processor-20251128214104380800000001"
    policy_arn = "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
    role       = "cloud-portfolio-dev-lambda-api-processor"
}

# aws_iam_role_policy_attachment.lambda_edge_basic:
resource "aws_iam_role_policy_attachment" "lambda_edge_basic" {
    id         = "cloud-portfolio-dev-lambda-edge-role-20251128202952466800000001"
    policy_arn = "arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
    role       = "cloud-portfolio-dev-lambda-edge-role"
}

# aws_iam_role_policy_attachment.ssm_policy:
resource "aws_iam_role_policy_attachment" "ssm_policy" {
    id         = "cloud-portfolio-dev-ec2-role-20251127182333947600000001"
    policy_arn = "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"
    role       = "cloud-portfolio-dev-ec2-role"
}

# aws_lambda_function.api_processor:
resource "aws_lambda_function" "api_processor" {
    architectures                  = [
        "x86_64",
    ]
    arn                            = "arn:aws:lambda:us-east-1:298393324887:function:cloud-portfolio-dev-api-processor"
    code_sha256                    = "slgkXuHD2w61huYhohXy282aq6nZarPnRCWNtHgbTEk="
    code_signing_config_arn        = [90mnull[0m[0m
    description                    = [90mnull[0m[0m
    filename                       = "./../../../lambda/api-processor.zip"
    function_name                  = "cloud-portfolio-dev-api-processor"
    handler                        = "api-processor.handler"
    id                             = "cloud-portfolio-dev-api-processor"
    image_uri                      = [90mnull[0m[0m
    invoke_arn                     = "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:298393324887:function:cloud-portfolio-dev-api-processor/invocations"
    kms_key_arn                    = [90mnull[0m[0m
    last_modified                  = "2025-11-28T21:41:12.922+0000"
    layers                         = []
    memory_size                    = 512
    package_type                   = "Zip"
    publish                        = false
    qualified_arn                  = "arn:aws:lambda:us-east-1:298393324887:function:cloud-portfolio-dev-api-processor:$LATEST"
    qualified_invoke_arn           = "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:298393324887:function:cloud-portfolio-dev-api-processor:$LATEST/invocations"
    reserved_concurrent_executions = -1
    role                           = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-lambda-api-processor"
    runtime                        = "nodejs18.x"
    signing_job_arn                = [90mnull[0m[0m
    signing_profile_version_arn    = [90mnull[0m[0m
    skip_destroy                   = false
    source_code_hash               = "slgkXuHD2w61huYhohXy282aq6nZarPnRCWNtHgbTEk="
    source_code_size               = 1142
    tags                           = {
        "Name" = "cloud-portfolio-dev-api-processor"
    }
    tags_all                       = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-api-processor"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    timeout                        = 30
    version                        = "$LATEST"

    environment {
        variables = {
            "ENVIRONMENT"    = "dev"
            "PROJECT_NAME"   = "cloud-portfolio"
            "RDS_ENDPOINT"   = "cloud-portfolio-dev-mysql.cqlw6kgk0bbv.us-east-1.rds.amazonaws.com:3306"
            "REDIS_ENDPOINT" = "cloud-portfolio-dev-redis.l8bwll.0001.use1.cache.amazonaws.com"
            "S3_BUCKET"      = "cloud-portfolio-dev-static-g8al5lmt"
        }
    }

    ephemeral_storage {
        size = 512
    }

    logging_config {
        application_log_level = [90mnull[0m[0m
        log_format            = "Text"
        log_group             = "/aws/lambda/cloud-portfolio-dev-api-processor"
        system_log_level      = [90mnull[0m[0m
    }

    tracing_config {
        mode = "PassThrough"
    }
}

# aws_lambda_function.security_headers:
resource "aws_lambda_function" "security_headers" {
    architectures                  = [
        "x86_64",
    ]
    arn                            = "arn:aws:lambda:us-east-1:298393324887:function:cloud-portfolio-dev-security-headers"
    code_sha256                    = "8Ul3MGEJ8iICFDim2J0Dl/HxvP+rqk9ViWHsP51NCwE="
    code_signing_config_arn        = [90mnull[0m[0m
    description                    = [90mnull[0m[0m
    filename                       = "./../../../lambda/security-headers.zip"
    function_name                  = "cloud-portfolio-dev-security-headers"
    handler                        = "security-headers.handler"
    id                             = "cloud-portfolio-dev-security-headers"
    image_uri                      = [90mnull[0m[0m
    invoke_arn                     = "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:298393324887:function:cloud-portfolio-dev-security-headers/invocations"
    kms_key_arn                    = [90mnull[0m[0m
    last_modified                  = "2025-11-28T20:30:00.332+0000"
    layers                         = []
    memory_size                    = 128
    package_type                   = "Zip"
    publish                        = true
    qualified_arn                  = "arn:aws:lambda:us-east-1:298393324887:function:cloud-portfolio-dev-security-headers:1"
    qualified_invoke_arn           = "arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:298393324887:function:cloud-portfolio-dev-security-headers:1/invocations"
    reserved_concurrent_executions = -1
    role                           = "arn:aws:iam::298393324887:role/cloud-portfolio-dev-lambda-edge-role"
    runtime                        = "nodejs18.x"
    signing_job_arn                = [90mnull[0m[0m
    signing_profile_version_arn    = [90mnull[0m[0m
    skip_destroy                   = false
    source_code_hash               = "8Ul3MGEJ8iICFDim2J0Dl/HxvP+rqk9ViWHsP51NCwE="
    source_code_size               = 602
    tags                           = {
        "Name" = "cloud-portfolio-dev-security-headers"
    }
    tags_all                       = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-security-headers"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    timeout                        = 5
    version                        = "1"

    ephemeral_storage {
        size = 512
    }

    logging_config {
        application_log_level = [90mnull[0m[0m
        log_format            = "Text"
        log_group             = "/aws/lambda/cloud-portfolio-dev-security-headers"
        system_log_level      = [90mnull[0m[0m
    }

    tracing_config {
        mode = "PassThrough"
    }
}

# aws_lambda_function_url.api_processor:
resource "aws_lambda_function_url" "api_processor" {
    authorization_type = "NONE"
    function_arn       = "arn:aws:lambda:us-east-1:298393324887:function:cloud-portfolio-dev-api-processor"
    function_name      = "cloud-portfolio-dev-api-processor"
    function_url       = "https://m6xxkellljejn4uxi2d4rumfiu0laqet.lambda-url.us-east-1.on.aws/"
    id                 = "cloud-portfolio-dev-api-processor"
    invoke_mode        = "BUFFERED"
    qualifier          = [90mnull[0m[0m
    url_id             = "m6xxkellljejn4uxi2d4rumfiu0laqet"

    cors {
        allow_credentials = true
        allow_headers     = [
            "content-type",
            "x-api-key",
        ]
        allow_methods     = [
            "GET",
            "POST",
        ]
        allow_origins     = [
            "*",
        ]
        expose_headers    = []
        max_age           = 86400
    }
}

# aws_launch_template.web:
resource "aws_launch_template" "web" {
    arn                                  = "arn:aws:ec2:us-east-1:298393324887:launch-template/lt-09b4e56a20f8cda75"
    default_version                      = 1
    description                          = [90mnull[0m[0m
    disable_api_stop                     = false
    disable_api_termination              = false
    ebs_optimized                        = [90mnull[0m[0m
    id                                   = "lt-09b4e56a20f8cda75"
    image_id                             = "ami-0156001f0548e90b1"
    instance_initiated_shutdown_behavior = [90mnull[0m[0m
    instance_type                        = "t2.micro"
    kernel_id                            = [90mnull[0m[0m
    key_name                             = [90mnull[0m[0m
    latest_version                       = 4
    name                                 = "cloud-portfolio-dev-web-20251127182340011000000003"
    name_prefix                          = "cloud-portfolio-dev-web-"
    ram_disk_id                          = [90mnull[0m[0m
    security_group_names                 = []
    tags                                 = {}
    tags_all                             = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    user_data                            = "ICAgICMhL2Jpbi9iYXNoDQogICAgeXVtIHVwZGF0ZSAteQ0KICAgIHl1bSBpbnN0YWxsIC15IGh0dHBkIG15c3FsDQoNCiAgICAjIENvbmZpZ3VyZSBBcGFjaGUgdG8gbGlzdGVuIG9uIHBvcnQgODA4MA0KICAgIHNlZCAtaSAncy9MaXN0ZW4gODAvTGlzdGVuIDgwODAvJyAvZXRjL2h0dHBkL2NvbmYvaHR0cGQuY29uZg0KDQogICAgc3lzdGVtY3RsIHN0YXJ0IGh0dHBkDQogICAgc3lzdGVtY3RsIGVuYWJsZSBodHRwZA0KDQogICAgIyBHZXQgaW5zdGFuY2UgbWV0YWRhdGENCiAgICBJTlNUQU5DRV9JRD0kKGN1cmwgLXMgaHR0cDovLzE2OS4yNTQuMTY5LjI1NC9sYXRlc3QvbWV0YS1kYXRhL2luc3RhbmNlLWlkKQ0KICAgIEFWQUlMQUJJTElUWV9aT05FPSQoY3VybCAtcyBodHRwOi8vMTY5LjI1NC4xNjkuMjU0L2xhdGVzdC9tZXRhLWRhdGEvcGxhY2VtZW50L2F2YWlsYWJpbGl0eS16b25lKQ0KDQogICAgIyBEYXRhYmFzZSBlbmRwb2ludCAod2lsbCBiZSBwb3B1bGF0ZWQgYWZ0ZXIgUkRTIGlzIGNyZWF0ZWQpDQogICAgREJfRU5EUE9JTlQ9ImNsb3VkLXBvcnRmb2xpby1kZXYtbXlzcWwuY3FsdzZrZ2swYmJ2LnVzLWVhc3QtMS5yZHMuYW1hem9uYXdzLmNvbTozMzA2Ig0KICAgIFMzX0JVQ0tFVD0iY2xvdWQtcG9ydGZvbGlvLWRldi1zdGF0aWMtZzhhbDVsbXQiDQoNCiAgICAjIENyZWF0ZSBhIHdlYnBhZ2Ugd2l0aCBmdWxsIHN0YWNrIGluZm8NCiAgICBjYXQgPiAvdmFyL3d3dy9odG1sL2luZGV4Lmh0bWwgPDxIVE1MDQogICAgPCFET0NUWVBFIGh0bWw+DQogICAgPGh0bWw+DQogICAgPGhlYWQ+DQogICAgICAgIDx0aXRsZT5DbG91ZCBQb3J0Zm9saW8gLSBGdWxsIFN0YWNrPC90aXRsZT4NCiAgICAgICAgPHN0eWxlPg0KICAgICAgICAgICAgYm9keSB7DQogICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IEFyaWFsLCBzYW5zLXNlcmlmOw0KICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCgxMzVkZWcsICM2NjdlZWEgMCUsICM3NjRiYTIgMTAwJSk7DQogICAgICAgICAgICAgICAgY29sb3I6IHdoaXRlOw0KICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsNCiAgICAgICAgICAgICAgICBtaW4taGVpZ2h0OiAxMDB2aDsNCiAgICAgICAgICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICAgICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC5jb250YWluZXIgew0KICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICAgICAgICAgICAgICBwYWRkaW5nOiA1MHB4Ow0KICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsNCiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMHB4Ow0KICAgICAgICAgICAgICAgIGJhY2tkcm9wLWZpbHRlcjogYmx1cigxMHB4KTsNCiAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDgwMHB4Ow0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaDEgeyBmb250LXNpemU6IDNlbTsgbWFyZ2luLWJvdHRvbTogMTBweDsgfQ0KICAgICAgICAgICAgaDIgeyBmb250LXNpemU6IDEuNWVtOyBtYXJnaW4tYm90dG9tOiAzMHB4OyBvcGFjaXR5OiAwLjk7IH0NCiAgICAgICAgICAgIC5pbmZvIHsNCiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuMik7DQogICAgICAgICAgICAgICAgcGFkZGluZzogMjBweDsNCiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxMHB4Ow0KICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7DQogICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIC5pbmZvIHAgeyBtYXJnaW46IDEwcHggMDsgZm9udC1zaXplOiAxLjFlbTsgfQ0KICAgICAgICAgICAgLnNlY3Rpb24geyBtYXJnaW46IDE1cHggMDsgfQ0KICAgICAgICAgICAgLnNlY3Rpb24tdGl0bGUgeyBmb250LXdlaWdodDogYm9sZDsgY29sb3I6ICNGRkQ3MDA7IH0NCiAgICAgICAgICAgIGhyIHsgYm9yZGVyOiAxcHggc29saWQgcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjIpOyBtYXJnaW46IDIwcHggMDsgfQ0KICAgICAgICA8L3N0eWxlPg0KICAgIDwvaGVhZD4NCiAgICA8Ym9keT4NCiAgICAgICAgPGRpdiBjbGFzcz0iY29udGFpbmVyIj4NCiAgICAgICAgICAgIDxoMT7wn5qAIENsb3VkIFBvcnRmb2xpbyBQcm9qZWN0PC9oMT4NCiAgICAgICAgICAgIDxoMj5GdWxsIFN0YWNrIEFXUyBJbmZyYXN0cnVjdHVyZTwvaDI+DQoNCiAgICAgICAgICAgIDxkaXYgY2xhc3M9ImluZm8iPg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24iPg0KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ic2VjdGlvbi10aXRsZSI+8J+ToSBJbnN0YW5jZSBEZXRhaWxzOjwvcD4NCiAgICAgICAgICAgICAgICAgICAgPHA+SW5zdGFuY2UgSUQ6ICRJTlNUQU5DRV9JRDwvcD4NCiAgICAgICAgICAgICAgICAgICAgPHA+QXZhaWxhYmlsaXR5IFpvbmU6ICRBVkFJTEFCSUxJVFlfWk9ORTwvcD4NCiAgICAgICAgICAgICAgICAgICAgPHA+U3RhdHVzOiDinIUgSGVhbHRoeTwvcD4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgIDxocj4NCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24iPg0KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ic2VjdGlvbi10aXRsZSI+4pyFIENvbm5lY3RlZCBDb21wb25lbnRzOjwvcD4NCiAgICAgICAgICAgICAgICAgICAgPHA+8J+TiiBEYXRhYmFzZTogJERCX0VORFBPSU5UPC9wPg0KICAgICAgICAgICAgICAgICAgICA8cD7wn5OmIFMzIEJ1Y2tldDogJFMzX0JVQ0tFVDwvcD4NCiAgICAgICAgICAgICAgICAgICAgPHA+8J+MkCBMb2FkIEJhbGFuY2VyOiBBY3RpdmU8L3A+DQogICAgICAgICAgICAgICAgICAgIDxwPvCflJAgTkFUIEdhdGV3YXk6IE9ubGluZTwvcD4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCg0KICAgICAgICAgICAgICAgIDxocj4NCg0KICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9InNlY3Rpb24iPg0KICAgICAgICAgICAgICAgICAgICA8cCBjbGFzcz0ic2VjdGlvbi10aXRsZSI+8J+Pl++4jyBBcmNoaXRlY3R1cmU6PC9wPg0KICAgICAgICAgICAgICAgICAgICA8cD7inJMgTXVsdGktQVogSGlnaCBBdmFpbGFiaWxpdHk8L3A+DQogICAgICAgICAgICAgICAgICAgIDxwPuKckyBBdXRvIFNjYWxpbmcgKDItNCBpbnN0YW5jZXMpPC9wPg0KICAgICAgICAgICAgICAgICAgICA8cD7inJMgUHJpdmF0ZSBTdWJuZXRzPC9wPg0KICAgICAgICAgICAgICAgICAgICA8cD7inJMgTWFuYWdlZCBEYXRhYmFzZSAoUkRTKTwvcD4NCiAgICAgICAgICAgICAgICA8L2Rpdj4NCiAgICAgICAgICAgIDwvZGl2Pg0KICAgICAgICA8L2Rpdj4NCiAgICA8L2JvZHk+DQogICAgPC9odG1sPg0KSFRNTA0KDQogICAgIyBDcmVhdGUgYSBoZWFsdGggY2hlY2sgZW5kcG9pbnQNCiAgICBlY2hvICJPSyIgPiAvdmFyL3d3dy9odG1sL2hlYWx0aA0K"
    vpc_security_group_ids               = [
        "sg-0bd6ac230a3a817a5",
    ]

    iam_instance_profile {
        arn  = [90mnull[0m[0m
        name = "cloud-portfolio-dev-ec2-profile"
    }

    tag_specifications {
        resource_type = "instance"
        tags          = {
            "Name" = "cloud-portfolio-dev-web-server"
            "Type" = "web"
        }
    }
}

# aws_lb.main:
resource "aws_lb" "main" {
    arn                                                          = "arn:aws:elasticloadbalancing:us-east-1:298393324887:loadbalancer/app/cloud-portfolio-dev-alb/6f936636eca84c08"
    arn_suffix                                                   = "app/cloud-portfolio-dev-alb/6f936636eca84c08"
    client_keep_alive                                            = 3600
    customer_owned_ipv4_pool                                     = [90mnull[0m[0m
    desync_mitigation_mode                                       = "defensive"
    dns_name                                                     = "cloud-portfolio-dev-alb-1314858601.us-east-1.elb.amazonaws.com"
    drop_invalid_header_fields                                   = false
    enable_cross_zone_load_balancing                             = true
    enable_deletion_protection                                   = false
    enable_http2                                                 = true
    enable_tls_version_and_cipher_suite_headers                  = false
    enable_waf_fail_open                                         = false
    enable_xff_client_port                                       = false
    enable_zonal_shift                                           = false
    enforce_security_group_inbound_rules_on_private_link_traffic = [90mnull[0m[0m
    id                                                           = "arn:aws:elasticloadbalancing:us-east-1:298393324887:loadbalancer/app/cloud-portfolio-dev-alb/6f936636eca84c08"
    idle_timeout                                                 = 60
    internal                                                     = false
    ip_address_type                                              = "ipv4"
    load_balancer_type                                           = "application"
    name                                                         = "cloud-portfolio-dev-alb"
    name_prefix                                                  = [90mnull[0m[0m
    preserve_host_header                                         = false
    security_groups                                              = [
        "sg-0c0542dce02baad53",
    ]
    subnets                                                      = [
        "subnet-088897741ce7dd0c1",
        "subnet-0b616838f21cc364b",
    ]
    tags                                                         = {
        "Name" = "cloud-portfolio-dev-alb"
    }
    tags_all                                                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-alb"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    vpc_id                                                       = "vpc-02fbf198865b54295"
    xff_header_processing_mode                                   = "append"
    zone_id                                                      = "Z35SXDOTRQ7X7K"

    access_logs {
        bucket  = [90mnull[0m[0m
        enabled = false
        prefix  = [90mnull[0m[0m
    }

    connection_logs {
        bucket  = [90mnull[0m[0m
        enabled = false
        prefix  = [90mnull[0m[0m
    }

    subnet_mapping {
        allocation_id        = [90mnull[0m[0m
        ipv6_address         = [90mnull[0m[0m
        outpost_id           = [90mnull[0m[0m
        private_ipv4_address = [90mnull[0m[0m
        subnet_id            = "subnet-088897741ce7dd0c1"
    }
    subnet_mapping {
        allocation_id        = [90mnull[0m[0m
        ipv6_address         = [90mnull[0m[0m
        outpost_id           = [90mnull[0m[0m
        private_ipv4_address = [90mnull[0m[0m
        subnet_id            = "subnet-0b616838f21cc364b"
    }
}

# aws_lb_listener.web:
resource "aws_lb_listener" "web" {
    arn                                                                 = "arn:aws:elasticloadbalancing:us-east-1:298393324887:listener/app/cloud-portfolio-dev-alb/6f936636eca84c08/8f8d82b4f4dbfcde"
    id                                                                  = "arn:aws:elasticloadbalancing:us-east-1:298393324887:listener/app/cloud-portfolio-dev-alb/6f936636eca84c08/8f8d82b4f4dbfcde"
    load_balancer_arn                                                   = "arn:aws:elasticloadbalancing:us-east-1:298393324887:loadbalancer/app/cloud-portfolio-dev-alb/6f936636eca84c08"
    port                                                                = 80
    protocol                                                            = "HTTP"
    routing_http_response_access_control_allow_credentials_header_value = [90mnull[0m[0m
    routing_http_response_access_control_allow_headers_header_value     = [90mnull[0m[0m
    routing_http_response_access_control_allow_methods_header_value     = [90mnull[0m[0m
    routing_http_response_access_control_allow_origin_header_value      = [90mnull[0m[0m
    routing_http_response_access_control_expose_headers_header_value    = [90mnull[0m[0m
    routing_http_response_access_control_max_age_header_value           = [90mnull[0m[0m
    routing_http_response_content_security_policy_header_value          = [90mnull[0m[0m
    routing_http_response_server_enabled                                = true
    routing_http_response_strict_transport_security_header_value        = [90mnull[0m[0m
    routing_http_response_x_content_type_options_header_value           = [90mnull[0m[0m
    routing_http_response_x_frame_options_header_value                  = [90mnull[0m[0m
    ssl_policy                                                          = [90mnull[0m[0m
    tags                                                                = {}
    tags_all                                                            = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }

    default_action {
        order            = 1
        target_group_arn = "arn:aws:elasticloadbalancing:us-east-1:298393324887:targetgroup/web-20251127183400100500000001/bdff4c0cb3f41491"
        type             = "forward"
    }
}

# aws_lb_listener_rule.ecs:
resource "aws_lb_listener_rule" "ecs" {
    arn          = "arn:aws:elasticloadbalancing:us-east-1:298393324887:listener-rule/app/cloud-portfolio-dev-alb/6f936636eca84c08/8f8d82b4f4dbfcde/6a40ec40bd9d98d5"
    id           = "arn:aws:elasticloadbalancing:us-east-1:298393324887:listener-rule/app/cloud-portfolio-dev-alb/6f936636eca84c08/8f8d82b4f4dbfcde/6a40ec40bd9d98d5"
    listener_arn = "arn:aws:elasticloadbalancing:us-east-1:298393324887:listener/app/cloud-portfolio-dev-alb/6f936636eca84c08/8f8d82b4f4dbfcde"
    priority     = 200
    tags         = {
        "Name" = "cloud-portfolio-dev-ecs-listener-rule"
    }
    tags_all     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-ecs-listener-rule"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }

    action {
        order            = 1
        target_group_arn = "arn:aws:elasticloadbalancing:us-east-1:298393324887:targetgroup/cloud-portfolio-dev-ecs-tg/d911b91411217c9b"
        type             = "forward"
    }

    condition {
        path_pattern {
            values = [
                "/ecs/*",
            ]
        }
    }
}

# aws_lb_listener_rule.health:
resource "aws_lb_listener_rule" "health" {
    arn          = "arn:aws:elasticloadbalancing:us-east-1:298393324887:listener-rule/app/cloud-portfolio-dev-alb/6f936636eca84c08/8f8d82b4f4dbfcde/fc8afa2b5b800979"
    id           = "arn:aws:elasticloadbalancing:us-east-1:298393324887:listener-rule/app/cloud-portfolio-dev-alb/6f936636eca84c08/8f8d82b4f4dbfcde/fc8afa2b5b800979"
    listener_arn = "arn:aws:elasticloadbalancing:us-east-1:298393324887:listener/app/cloud-portfolio-dev-alb/6f936636eca84c08/8f8d82b4f4dbfcde"
    priority     = 100
    tags         = {}
    tags_all     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }

    action {
        order            = 1
        target_group_arn = "arn:aws:elasticloadbalancing:us-east-1:298393324887:targetgroup/web-20251127183400100500000001/bdff4c0cb3f41491"
        type             = "forward"
    }

    condition {
        path_pattern {
            values = [
                "/health",
            ]
        }
    }
}

# aws_lb_target_group.ecs:
resource "aws_lb_target_group" "ecs" {
    arn                                = "arn:aws:elasticloadbalancing:us-east-1:298393324887:targetgroup/cloud-portfolio-dev-ecs-tg/d911b91411217c9b"
    arn_suffix                         = "targetgroup/cloud-portfolio-dev-ecs-tg/d911b91411217c9b"
    deregistration_delay               = "300"
    id                                 = "arn:aws:elasticloadbalancing:us-east-1:298393324887:targetgroup/cloud-portfolio-dev-ecs-tg/d911b91411217c9b"
    ip_address_type                    = "ipv4"
    lambda_multi_value_headers_enabled = false
    load_balancer_arns                 = []
    load_balancing_algorithm_type      = "round_robin"
    load_balancing_anomaly_mitigation  = "off"
    load_balancing_cross_zone_enabled  = "use_load_balancer_configuration"
    name                               = "cloud-portfolio-dev-ecs-tg"
    name_prefix                        = [90mnull[0m[0m
    port                               = 8080
    protocol                           = "HTTP"
    protocol_version                   = "HTTP1"
    proxy_protocol_v2                  = false
    slow_start                         = 0
    tags                               = {
        "Name" = "cloud-portfolio-dev-ecs-tg"
    }
    tags_all                           = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-ecs-tg"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    target_type                        = "ip"
    vpc_id                             = "vpc-02fbf198865b54295"

    health_check {
        enabled             = true
        healthy_threshold   = 2
        interval            = 30
        matcher             = "200"
        path                = "/health"
        port                = "traffic-port"
        protocol            = "HTTP"
        timeout             = 5
        unhealthy_threshold = 2
    }

    stickiness {
        cookie_duration = 86400
        cookie_name     = [90mnull[0m[0m
        enabled         = false
        type            = "lb_cookie"
    }

    target_failover {}

    target_group_health {
        dns_failover {
            minimum_healthy_targets_count      = "1"
            minimum_healthy_targets_percentage = "off"
        }
        unhealthy_state_routing {
            minimum_healthy_targets_count      = 1
            minimum_healthy_targets_percentage = "off"
        }
    }

    target_health_state {}
}

# aws_lb_target_group.web:
resource "aws_lb_target_group" "web" {
    arn                                = "arn:aws:elasticloadbalancing:us-east-1:298393324887:targetgroup/web-20251127183400100500000001/bdff4c0cb3f41491"
    arn_suffix                         = "targetgroup/web-20251127183400100500000001/bdff4c0cb3f41491"
    deregistration_delay               = "300"
    id                                 = "arn:aws:elasticloadbalancing:us-east-1:298393324887:targetgroup/web-20251127183400100500000001/bdff4c0cb3f41491"
    ip_address_type                    = "ipv4"
    lambda_multi_value_headers_enabled = false
    load_balancer_arns                 = [
        "arn:aws:elasticloadbalancing:us-east-1:298393324887:loadbalancer/app/cloud-portfolio-dev-alb/6f936636eca84c08",
    ]
    load_balancing_algorithm_type      = "round_robin"
    load_balancing_anomaly_mitigation  = "off"
    load_balancing_cross_zone_enabled  = "use_load_balancer_configuration"
    name                               = "web-20251127183400100500000001"
    name_prefix                        = "web-"
    port                               = 8080
    protocol                           = "HTTP"
    protocol_version                   = "HTTP1"
    proxy_protocol_v2                  = false
    slow_start                         = 0
    tags                               = {
        "Name" = "cloud-portfolio-dev-web-tg"
    }
    tags_all                           = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-web-tg"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    target_type                        = "instance"
    vpc_id                             = "vpc-02fbf198865b54295"

    health_check {
        enabled             = true
        healthy_threshold   = 2
        interval            = 30
        matcher             = "200"
        path                = "/health"
        port                = "traffic-port"
        protocol            = "HTTP"
        timeout             = 5
        unhealthy_threshold = 2
    }

    stickiness {
        cookie_duration = 86400
        cookie_name     = [90mnull[0m[0m
        enabled         = true
        type            = "lb_cookie"
    }

    target_failover {}

    target_group_health {
        dns_failover {
            minimum_healthy_targets_count      = "1"
            minimum_healthy_targets_percentage = "off"
        }
        unhealthy_state_routing {
            minimum_healthy_targets_count      = 1
            minimum_healthy_targets_percentage = "off"
        }
    }

    target_health_state {}
}

# aws_s3_bucket.session_logs:
resource "aws_s3_bucket" "session_logs" {
    acceleration_status         = [90mnull[0m[0m
    arn                         = "arn:aws:s3:::cloud-portfolio-dev-session-logs-g8al5lmt"
    bucket                      = "cloud-portfolio-dev-session-logs-g8al5lmt"
    bucket_domain_name          = "cloud-portfolio-dev-session-logs-g8al5lmt.s3.amazonaws.com"
    bucket_prefix               = [90mnull[0m[0m
    bucket_regional_domain_name = "cloud-portfolio-dev-session-logs-g8al5lmt.s3.us-east-1.amazonaws.com"
    force_destroy               = false
    hosted_zone_id              = "Z3AQBSTGFYJSTF"
    id                          = "cloud-portfolio-dev-session-logs-g8al5lmt"
    object_lock_enabled         = false
    policy                      = [90mnull[0m[0m
    region                      = "us-east-1"
    request_payer               = "BucketOwner"
    tags                        = {
        "Name" = "cloud-portfolio-dev-session-logs"
    }
    tags_all                    = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-session-logs"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }

    grant {
        id          = "51decb1d4c0308f6dbb60456435a1448f346c5857bc418b14dffce3134c22e9c"
        permissions = [
            "FULL_CONTROL",
        ]
        type        = "CanonicalUser"
        uri         = [90mnull[0m[0m
    }

    server_side_encryption_configuration {
        rule {
            bucket_key_enabled = false

            apply_server_side_encryption_by_default {
                kms_master_key_id = [90mnull[0m[0m
                sse_algorithm     = "AES256"
            }
        }
    }

    versioning {
        enabled    = true
        mfa_delete = false
    }
}

# aws_s3_bucket.static_content:
resource "aws_s3_bucket" "static_content" {
    acceleration_status         = [90mnull[0m[0m
    arn                         = "arn:aws:s3:::cloud-portfolio-dev-static-g8al5lmt"
    bucket                      = "cloud-portfolio-dev-static-g8al5lmt"
    bucket_domain_name          = "cloud-portfolio-dev-static-g8al5lmt.s3.amazonaws.com"
    bucket_prefix               = [90mnull[0m[0m
    bucket_regional_domain_name = "cloud-portfolio-dev-static-g8al5lmt.s3.us-east-1.amazonaws.com"
    force_destroy               = false
    hosted_zone_id              = "Z3AQBSTGFYJSTF"
    id                          = "cloud-portfolio-dev-static-g8al5lmt"
    object_lock_enabled         = false
    policy                      = jsonencode(
        {
            Statement = [
                {
                    Action    = "s3:GetObject"
                    Effect    = "Allow"
                    Principal = {
                        AWS = "arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E1XH96VXJRX0SR"
                    }
                    Resource  = "arn:aws:s3:::cloud-portfolio-dev-static-g8al5lmt/*"
                    Sid       = "AllowCloudFrontAccess"
                },
            ]
            Version   = "2012-10-17"
        }
    )
    region                      = "us-east-1"
    request_payer               = "BucketOwner"
    tags                        = {
        "BackupEnabled" = "true"
        "Name"          = "cloud-portfolio-dev-static"
    }
    tags_all                    = {
        "BackupEnabled" = "true"
        "Environment"   = "dev"
        "ManagedBy"     = "terraform"
        "Name"          = "cloud-portfolio-dev-static"
        "Owner"         = "jacobspeart@gmail.com"
        "Project"       = "cloud-portfolio"
    }

    grant {
        id          = "51decb1d4c0308f6dbb60456435a1448f346c5857bc418b14dffce3134c22e9c"
        permissions = [
            "FULL_CONTROL",
        ]
        type        = "CanonicalUser"
        uri         = [90mnull[0m[0m
    }

    lifecycle_rule {
        abort_incomplete_multipart_upload_days = 0
        enabled                                = true
        id                                     = "delete-old-versions"
        prefix                                 = [90mnull[0m[0m
        tags                                   = {}

        noncurrent_version_expiration {
            days = 30
        }
    }
    lifecycle_rule {
        abort_incomplete_multipart_upload_days = 0
        enabled                                = true
        id                                     = "transition-to-ia"
        prefix                                 = [90mnull[0m[0m
        tags                                   = {}

        transition {
            date          = [90mnull[0m[0m
            days          = 30
            storage_class = "STANDARD_IA"
        }
    }

    server_side_encryption_configuration {
        rule {
            bucket_key_enabled = false

            apply_server_side_encryption_by_default {
                kms_master_key_id = [90mnull[0m[0m
                sse_algorithm     = "AES256"
            }
        }
    }

    versioning {
        enabled    = true
        mfa_delete = false
    }
}

# aws_s3_bucket_lifecycle_configuration.static_content:
resource "aws_s3_bucket_lifecycle_configuration" "static_content" {
    bucket                                 = "cloud-portfolio-dev-static-g8al5lmt"
    expected_bucket_owner                  = [90mnull[0m[0m
    id                                     = "cloud-portfolio-dev-static-g8al5lmt"
    transition_default_minimum_object_size = "all_storage_classes_128K"

    rule {
        id     = "delete-old-versions"
        prefix = [90mnull[0m[0m
        status = "Enabled"

        filter {
            prefix = [90mnull[0m[0m
        }

        noncurrent_version_expiration {
            noncurrent_days = 30
        }
    }
    rule {
        id     = "transition-to-ia"
        prefix = [90mnull[0m[0m
        status = "Enabled"

        filter {
            prefix = [90mnull[0m[0m
        }

        transition {
            days          = 30
            storage_class = "STANDARD_IA"
        }
    }
}

# aws_s3_bucket_policy.static_content:
resource "aws_s3_bucket_policy" "static_content" {
    bucket = "cloud-portfolio-dev-static-g8al5lmt"
    id     = "cloud-portfolio-dev-static-g8al5lmt"
    policy = jsonencode(
        {
            Statement = [
                {
                    Action    = "s3:GetObject"
                    Effect    = "Allow"
                    Principal = {
                        AWS = "arn:aws:iam::cloudfront:user/CloudFront Origin Access Identity E1XH96VXJRX0SR"
                    }
                    Resource  = "arn:aws:s3:::cloud-portfolio-dev-static-g8al5lmt/*"
                    Sid       = "AllowCloudFrontAccess"
                },
            ]
            Version   = "2012-10-17"
        }
    )
}

# aws_s3_bucket_public_access_block.session_logs:
resource "aws_s3_bucket_public_access_block" "session_logs" {
    block_public_acls       = true
    block_public_policy     = true
    bucket                  = "cloud-portfolio-dev-session-logs-g8al5lmt"
    id                      = "cloud-portfolio-dev-session-logs-g8al5lmt"
    ignore_public_acls      = true
    restrict_public_buckets = true
}

# aws_s3_bucket_public_access_block.static_content:
resource "aws_s3_bucket_public_access_block" "static_content" {
    block_public_acls       = true
    block_public_policy     = true
    bucket                  = "cloud-portfolio-dev-static-g8al5lmt"
    id                      = "cloud-portfolio-dev-static-g8al5lmt"
    ignore_public_acls      = true
    restrict_public_buckets = true
}

# aws_s3_bucket_server_side_encryption_configuration.session_logs:
resource "aws_s3_bucket_server_side_encryption_configuration" "session_logs" {
    bucket                = "cloud-portfolio-dev-session-logs-g8al5lmt"
    expected_bucket_owner = [90mnull[0m[0m
    id                    = "cloud-portfolio-dev-session-logs-g8al5lmt"

    rule {
        bucket_key_enabled = false

        apply_server_side_encryption_by_default {
            kms_master_key_id = [90mnull[0m[0m
            sse_algorithm     = "AES256"
        }
    }
}

# aws_s3_bucket_server_side_encryption_configuration.static_content:
resource "aws_s3_bucket_server_side_encryption_configuration" "static_content" {
    bucket                = "cloud-portfolio-dev-static-g8al5lmt"
    expected_bucket_owner = [90mnull[0m[0m
    id                    = "cloud-portfolio-dev-static-g8al5lmt"

    rule {
        bucket_key_enabled = false

        apply_server_side_encryption_by_default {
            kms_master_key_id = [90mnull[0m[0m
            sse_algorithm     = "AES256"
        }
    }
}

# aws_s3_bucket_versioning.session_logs:
resource "aws_s3_bucket_versioning" "session_logs" {
    bucket                = "cloud-portfolio-dev-session-logs-g8al5lmt"
    expected_bucket_owner = [90mnull[0m[0m
    id                    = "cloud-portfolio-dev-session-logs-g8al5lmt"

    versioning_configuration {
        mfa_delete = [90mnull[0m[0m
        status     = "Enabled"
    }
}

# aws_s3_bucket_versioning.static_content:
resource "aws_s3_bucket_versioning" "static_content" {
    bucket                = "cloud-portfolio-dev-static-g8al5lmt"
    expected_bucket_owner = [90mnull[0m[0m
    id                    = "cloud-portfolio-dev-static-g8al5lmt"

    versioning_configuration {
        mfa_delete = [90mnull[0m[0m
        status     = "Enabled"
    }
}

# aws_secretsmanager_secret.db_password:
resource "aws_secretsmanager_secret" "db_password" {
    arn                            = "arn:aws:secretsmanager:us-east-1:298393324887:secret:cloud-portfolio-dev-db-password-20251128034435547900000001-R6XecG"
    description                    = "RDS MySQL password for cloud-portfolio"
    force_overwrite_replica_secret = false
    id                             = "arn:aws:secretsmanager:us-east-1:298393324887:secret:cloud-portfolio-dev-db-password-20251128034435547900000001-R6XecG"
    kms_key_id                     = [90mnull[0m[0m
    name                           = "cloud-portfolio-dev-db-password-20251128034435547900000001"
    name_prefix                    = "cloud-portfolio-dev-db-password-"
    policy                         = [90mnull[0m[0m
    recovery_window_in_days        = 30
    tags                           = {
        "Name" = "cloud-portfolio-dev-db-password"
    }
    tags_all                       = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-db-password"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
}

# aws_secretsmanager_secret_version.db_password:
resource "aws_secretsmanager_secret_version" "db_password" {
    arn              = "arn:aws:secretsmanager:us-east-1:298393324887:secret:cloud-portfolio-dev-db-password-20251128034435547900000001-R6XecG"
    id               = "arn:aws:secretsmanager:us-east-1:298393324887:secret:cloud-portfolio-dev-db-password-20251128034435547900000001-R6XecG|terraform-20251128035414244400000001"
    secret_binary    = (sensitive value)
    secret_id        = "arn:aws:secretsmanager:us-east-1:298393324887:secret:cloud-portfolio-dev-db-password-20251128034435547900000001-R6XecG"
    secret_string    = (sensitive value)
    secret_string_wo = (write-only attribute)
    version_id       = "terraform-20251128035414244400000001"
    version_stages   = [
        "AWSCURRENT",
    ]
}

# aws_security_group.ecs_tasks:
resource "aws_security_group" "ecs_tasks" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group/sg-0abb7c3da6cca6607"
    description            = "Security group for ECS tasks"
    egress                 = [
        {
            cidr_blocks      = [
                "0.0.0.0/0",
            ]
            description      = [90mnull[0m[0m
            from_port        = 0
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "-1"
            security_groups  = []
            self             = false
            to_port          = 0
        },
    ]
    id                     = "sg-0abb7c3da6cca6607"
    ingress                = [
        {
            cidr_blocks      = []
            description      = [90mnull[0m[0m
            from_port        = 8080
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = [
                "sg-0c0542dce02baad53",
            ]
            self             = false
            to_port          = 8080
        },
    ]
    name                   = "cloud-portfolio-dev-ecs-tasks"
    name_prefix            = [90mnull[0m[0m
    owner_id               = "298393324887"
    revoke_rules_on_delete = false
    tags                   = {
        "Name" = "cloud-portfolio-dev-ecs-tasks-sg"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-ecs-tasks-sg"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    vpc_id                 = "vpc-02fbf198865b54295"
}

# aws_service_discovery_private_dns_namespace.main:
resource "aws_service_discovery_private_dns_namespace" "main" {
    arn         = "arn:aws:servicediscovery:us-east-1:298393324887:namespace/ns-3oyctyi7yxbt3xhc"
    description = "Private DNS namespace for cloud-portfolio service discovery"
    hosted_zone = "Z06463963NS4JSH0C1GWF"
    id          = "ns-3oyctyi7yxbt3xhc"
    name        = "cloud-portfolio.local"
    tags        = {
        "Name" = "cloud-portfolio-dev-namespace"
    }
    tags_all    = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-namespace"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    vpc         = "vpc-02fbf198865b54295"
}

# aws_service_discovery_service.app:
resource "aws_service_discovery_service" "app" {
    arn           = "arn:aws:servicediscovery:us-east-1:298393324887:service/srv-tk36wtks22bi3kfu"
    description   = [90mnull[0m[0m
    force_destroy = false
    id            = "srv-tk36wtks22bi3kfu"
    name          = "app"
    namespace_id  = "ns-3oyctyi7yxbt3xhc"
    tags          = {
        "Name" = "cloud-portfolio-dev-service-discovery"
    }
    tags_all      = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-service-discovery"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    type          = "DNS_HTTP"

    dns_config {
        namespace_id   = "ns-3oyctyi7yxbt3xhc"
        routing_policy = "MULTIVALUE"

        dns_records {
            ttl  = 10
            type = "A"
        }
    }

    health_check_custom_config {
        failure_threshold = 1
    }
}

# aws_sns_topic.alarms:
resource "aws_sns_topic" "alarms" {
    application_failure_feedback_role_arn    = [90mnull[0m[0m
    application_success_feedback_role_arn    = [90mnull[0m[0m
    application_success_feedback_sample_rate = 0
    archive_policy                           = [90mnull[0m[0m
    arn                                      = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms"
    beginning_archive_time                   = [90mnull[0m[0m
    content_based_deduplication              = false
    delivery_policy                          = [90mnull[0m[0m
    display_name                             = [90mnull[0m[0m
    fifo_throughput_scope                    = [90mnull[0m[0m
    fifo_topic                               = false
    firehose_failure_feedback_role_arn       = [90mnull[0m[0m
    firehose_success_feedback_role_arn       = [90mnull[0m[0m
    firehose_success_feedback_sample_rate    = 0
    http_failure_feedback_role_arn           = [90mnull[0m[0m
    http_success_feedback_role_arn           = [90mnull[0m[0m
    http_success_feedback_sample_rate        = 0
    id                                       = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms"
    kms_master_key_id                        = [90mnull[0m[0m
    lambda_failure_feedback_role_arn         = [90mnull[0m[0m
    lambda_success_feedback_role_arn         = [90mnull[0m[0m
    lambda_success_feedback_sample_rate      = 0
    name                                     = "cloud-portfolio-dev-alarms"
    name_prefix                              = [90mnull[0m[0m
    owner                                    = "298393324887"
    policy                                   = jsonencode(
        {
            Id        = "__default_policy_ID"
            Statement = [
                {
                    Action    = [
                        "SNS:GetTopicAttributes",
                        "SNS:SetTopicAttributes",
                        "SNS:AddPermission",
                        "SNS:RemovePermission",
                        "SNS:DeleteTopic",
                        "SNS:Subscribe",
                        "SNS:ListSubscriptionsByTopic",
                        "SNS:Publish",
                    ]
                    Condition = {
                        StringEquals = {
                            "AWS:SourceOwner" = "298393324887"
                        }
                    }
                    Effect    = "Allow"
                    Principal = {
                        AWS = "*"
                    }
                    Resource  = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms"
                    Sid       = "__default_statement_ID"
                },
            ]
            Version   = "2008-10-17"
        }
    )
    signature_version                        = 0
    sqs_failure_feedback_role_arn            = [90mnull[0m[0m
    sqs_success_feedback_role_arn            = [90mnull[0m[0m
    sqs_success_feedback_sample_rate         = 0
    tags                                     = {
        "Name" = "cloud-portfolio-dev-alarms"
    }
    tags_all                                 = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-alarms"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tracing_config                           = [90mnull[0m[0m
}

# aws_sns_topic.backup_notifications:
resource "aws_sns_topic" "backup_notifications" {
    application_failure_feedback_role_arn    = [90mnull[0m[0m
    application_success_feedback_role_arn    = [90mnull[0m[0m
    application_success_feedback_sample_rate = 0
    archive_policy                           = [90mnull[0m[0m
    arn                                      = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-backup-notifications"
    beginning_archive_time                   = [90mnull[0m[0m
    content_based_deduplication              = false
    delivery_policy                          = [90mnull[0m[0m
    display_name                             = [90mnull[0m[0m
    fifo_throughput_scope                    = [90mnull[0m[0m
    fifo_topic                               = false
    firehose_failure_feedback_role_arn       = [90mnull[0m[0m
    firehose_success_feedback_role_arn       = [90mnull[0m[0m
    firehose_success_feedback_sample_rate    = 0
    http_failure_feedback_role_arn           = [90mnull[0m[0m
    http_success_feedback_role_arn           = [90mnull[0m[0m
    http_success_feedback_sample_rate        = 0
    id                                       = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-backup-notifications"
    kms_master_key_id                        = [90mnull[0m[0m
    lambda_failure_feedback_role_arn         = [90mnull[0m[0m
    lambda_success_feedback_role_arn         = [90mnull[0m[0m
    lambda_success_feedback_sample_rate      = 0
    name                                     = "cloud-portfolio-dev-backup-notifications"
    name_prefix                              = [90mnull[0m[0m
    owner                                    = "298393324887"
    policy                                   = jsonencode(
        {
            Statement = [
                {
                    Action    = "SNS:Publish"
                    Effect    = "Allow"
                    Principal = {
                        Service = "events.amazonaws.com"
                    }
                    Resource  = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-backup-notifications"
                },
            ]
            Version   = "2012-10-17"
        }
    )
    signature_version                        = 0
    sqs_failure_feedback_role_arn            = [90mnull[0m[0m
    sqs_success_feedback_role_arn            = [90mnull[0m[0m
    sqs_success_feedback_sample_rate         = 0
    tags                                     = {
        "Name" = "cloud-portfolio-dev-backup-notifications"
    }
    tags_all                                 = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-backup-notifications"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tracing_config                           = [90mnull[0m[0m
}

# aws_sns_topic_policy.backup_notifications:
resource "aws_sns_topic_policy" "backup_notifications" {
    arn    = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-backup-notifications"
    id     = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-backup-notifications"
    owner  = "298393324887"
    policy = jsonencode(
        {
            Statement = [
                {
                    Action    = "SNS:Publish"
                    Effect    = "Allow"
                    Principal = {
                        Service = "events.amazonaws.com"
                    }
                    Resource  = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-backup-notifications"
                },
            ]
            Version   = "2012-10-17"
        }
    )
}

# aws_sns_topic_subscription.alarm_email:
resource "aws_sns_topic_subscription" "alarm_email" {
    arn                             = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms:54fb2889-8aa4-4843-8b7e-75aa51ec0de4"
    confirmation_timeout_in_minutes = 1
    confirmation_was_authenticated  = false
    delivery_policy                 = [90mnull[0m[0m
    endpoint                        = "jacobspeart@gmail.com"
    endpoint_auto_confirms          = false
    filter_policy                   = [90mnull[0m[0m
    filter_policy_scope             = [90mnull[0m[0m
    id                              = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms:54fb2889-8aa4-4843-8b7e-75aa51ec0de4"
    owner_id                        = "298393324887"
    pending_confirmation            = true
    protocol                        = "email"
    raw_message_delivery            = false
    redrive_policy                  = [90mnull[0m[0m
    replay_policy                   = [90mnull[0m[0m
    subscription_role_arn           = [90mnull[0m[0m
    topic_arn                       = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms"
}

# aws_sns_topic_subscription.backup_email:
resource "aws_sns_topic_subscription" "backup_email" {
    arn                             = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-backup-notifications:efa78e5f-a46e-4b59-99ac-8b73cf8fe9f2"
    confirmation_timeout_in_minutes = 1
    confirmation_was_authenticated  = false
    delivery_policy                 = [90mnull[0m[0m
    endpoint                        = "jacobspeart@gmail.com"
    endpoint_auto_confirms          = false
    filter_policy                   = [90mnull[0m[0m
    filter_policy_scope             = [90mnull[0m[0m
    id                              = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-backup-notifications:efa78e5f-a46e-4b59-99ac-8b73cf8fe9f2"
    owner_id                        = "298393324887"
    pending_confirmation            = true
    protocol                        = "email"
    raw_message_delivery            = false
    redrive_policy                  = [90mnull[0m[0m
    replay_policy                   = [90mnull[0m[0m
    subscription_role_arn           = [90mnull[0m[0m
    topic_arn                       = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-backup-notifications"
}

# aws_ssm_document.session_manager_prefs:
resource "aws_ssm_document" "session_manager_prefs" {
    arn              = "arn:aws:ssm:us-east-1:298393324887:document/cloud-portfolio-dev-session-manager-prefs"
    content          = jsonencode(
        {
            description   = "Document to configure session logging"
            inputs        = {
                cloudWatchEncryptionEnabled = true
                cloudWatchLogGroupName      = "/aws/ssm/cloud-portfolio-dev-session-logs"
                cloudWatchStreamingEnabled  = true
                s3BucketName                = "cloud-portfolio-dev-session-logs-g8al5lmt"
                s3EncryptionEnabled         = true
                s3KeyPrefix                 = "session-logs/"
            }
            schemaVersion = "1.0"
            sessionType   = "Standard_Stream"
        }
    )
    created_date     = "2025-11-28T20:29:52Z"
    default_version  = "1"
    description      = [90mnull[0m[0m
    document_format  = "JSON"
    document_type    = "Session"
    document_version = "1"
    hash             = "04b9e5e450c9aa2ec1e20d53070a93983730153d1b7113cb56b45b508ef98fd6"
    hash_type        = "Sha256"
    id               = "cloud-portfolio-dev-session-manager-prefs"
    latest_version   = "1"
    name             = "cloud-portfolio-dev-session-manager-prefs"
    owner            = "298393324887"
    parameter        = []
    permissions      = {}
    platform_types   = [
        "Windows",
        "Linux",
        "MacOS",
    ]
    schema_version   = "1.0"
    status           = "Active"
    tags             = {
        "Name" = "cloud-portfolio-dev-session-manager-prefs"
    }
    tags_all         = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-session-manager-prefs"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    target_type      = [90mnull[0m[0m
    version_name     = [90mnull[0m[0m
}

# aws_ssm_parameter.alb_dns:
resource "aws_ssm_parameter" "alb_dns" {
    allowed_pattern = [90mnull[0m[0m
    arn             = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/dev/alb/dns_name"
    data_type       = "text"
    description     = "Application Load Balancer DNS name"
    id              = "/cloud-portfolio/dev/alb/dns_name"
    key_id          = [90mnull[0m[0m
    name            = "/cloud-portfolio/dev/alb/dns_name"
    tags            = {
        "Name" = "cloud-portfolio-dev-alb-dns"
    }
    tags_all        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-alb-dns"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tier            = "Standard"
    type            = "String"
    value           = (sensitive value)
    value_wo        = (write-only attribute)
    version         = 1
}

# aws_ssm_parameter.api_gateway_url:
resource "aws_ssm_parameter" "api_gateway_url" {
    allowed_pattern = [90mnull[0m[0m
    arn             = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/dev/api_gateway/url"
    data_type       = "text"
    description     = "API Gateway invoke URL"
    id              = "/cloud-portfolio/dev/api_gateway/url"
    key_id          = [90mnull[0m[0m
    name            = "/cloud-portfolio/dev/api_gateway/url"
    tags            = {
        "Name" = "cloud-portfolio-dev-api-gateway-url"
    }
    tags_all        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-api-gateway-url"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tier            = "Standard"
    type            = "String"
    value           = (sensitive value)
    value_wo        = (write-only attribute)
    version         = 1
}

# aws_ssm_parameter.backup_vault:
resource "aws_ssm_parameter" "backup_vault" {
    allowed_pattern = [90mnull[0m[0m
    arn             = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/dev/backup/vault_name"
    data_type       = "text"
    description     = "AWS Backup vault name"
    id              = "/cloud-portfolio/dev/backup/vault_name"
    key_id          = [90mnull[0m[0m
    name            = "/cloud-portfolio/dev/backup/vault_name"
    tags            = {
        "Name" = "cloud-portfolio-dev-backup-vault"
    }
    tags_all        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-backup-vault"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tier            = "Standard"
    type            = "String"
    value           = (sensitive value)
    value_wo        = (write-only attribute)
    version         = 1
}

# aws_ssm_parameter.cloudfront_distribution:
resource "aws_ssm_parameter" "cloudfront_distribution" {
    allowed_pattern = [90mnull[0m[0m
    arn             = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/dev/cloudfront/distribution_id"
    data_type       = "text"
    description     = "CloudFront distribution ID"
    id              = "/cloud-portfolio/dev/cloudfront/distribution_id"
    key_id          = [90mnull[0m[0m
    name            = "/cloud-portfolio/dev/cloudfront/distribution_id"
    tags            = {
        "Name" = "cloud-portfolio-dev-cloudfront-distribution"
    }
    tags_all        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-cloudfront-distribution"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tier            = "Standard"
    type            = "String"
    value           = (sensitive value)
    value_wo        = (write-only attribute)
    version         = 1
}

# aws_ssm_parameter.cloudfront_domain:
resource "aws_ssm_parameter" "cloudfront_domain" {
    allowed_pattern = [90mnull[0m[0m
    arn             = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/dev/cloudfront/domain"
    data_type       = "text"
    description     = "CloudFront distribution domain name"
    id              = "/cloud-portfolio/dev/cloudfront/domain"
    key_id          = [90mnull[0m[0m
    name            = "/cloud-portfolio/dev/cloudfront/domain"
    tags            = {
        "Name" = "cloud-portfolio-dev-cloudfront-domain"
    }
    tags_all        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-cloudfront-domain"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tier            = "Standard"
    type            = "String"
    value           = (sensitive value)
    value_wo        = (write-only attribute)
    version         = 1
}

# aws_ssm_parameter.database_endpoint:
resource "aws_ssm_parameter" "database_endpoint" {
    allowed_pattern = [90mnull[0m[0m
    arn             = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/dev/database/endpoint"
    data_type       = "text"
    description     = "RDS database endpoint"
    id              = "/cloud-portfolio/dev/database/endpoint"
    key_id          = [90mnull[0m[0m
    name            = "/cloud-portfolio/dev/database/endpoint"
    tags            = {
        "Name" = "cloud-portfolio-dev-db-endpoint"
    }
    tags_all        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-db-endpoint"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tier            = "Standard"
    type            = "String"
    value           = (sensitive value)
    value_wo        = (write-only attribute)
    version         = 1
}

# aws_ssm_parameter.ecs_cluster:
resource "aws_ssm_parameter" "ecs_cluster" {
    allowed_pattern = [90mnull[0m[0m
    arn             = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/dev/ecs/cluster_name"
    data_type       = "text"
    description     = "ECS cluster name"
    id              = "/cloud-portfolio/dev/ecs/cluster_name"
    key_id          = [90mnull[0m[0m
    name            = "/cloud-portfolio/dev/ecs/cluster_name"
    tags            = {
        "Name" = "cloud-portfolio-dev-ecs-cluster"
    }
    tags_all        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-ecs-cluster"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tier            = "Standard"
    type            = "String"
    value           = (sensitive value)
    value_wo        = (write-only attribute)
    version         = 1
}

# aws_ssm_parameter.lambda_function_url:
resource "aws_ssm_parameter" "lambda_function_url" {
    allowed_pattern = [90mnull[0m[0m
    arn             = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/dev/lambda/api_processor_url"
    data_type       = "text"
    description     = "Lambda API processor function URL"
    id              = "/cloud-portfolio/dev/lambda/api_processor_url"
    key_id          = [90mnull[0m[0m
    name            = "/cloud-portfolio/dev/lambda/api_processor_url"
    tags            = {
        "Name" = "cloud-portfolio-dev-lambda-url"
    }
    tags_all        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-lambda-url"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tier            = "Standard"
    type            = "String"
    value           = (sensitive value)
    value_wo        = (write-only attribute)
    version         = 1
}

# aws_ssm_parameter.redis_endpoint:
resource "aws_ssm_parameter" "redis_endpoint" {
    allowed_pattern = [90mnull[0m[0m
    arn             = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/dev/redis/endpoint"
    data_type       = "text"
    description     = "ElastiCache Redis endpoint"
    id              = "/cloud-portfolio/dev/redis/endpoint"
    key_id          = [90mnull[0m[0m
    name            = "/cloud-portfolio/dev/redis/endpoint"
    tags            = {
        "Name" = "cloud-portfolio-dev-redis-endpoint"
    }
    tags_all        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-redis-endpoint"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tier            = "Standard"
    type            = "String"
    value           = (sensitive value)
    value_wo        = (write-only attribute)
    version         = 1
}

# aws_ssm_parameter.s3_bucket:
resource "aws_ssm_parameter" "s3_bucket" {
    allowed_pattern = [90mnull[0m[0m
    arn             = "arn:aws:ssm:us-east-1:298393324887:parameter/cloud-portfolio/dev/s3/bucket"
    data_type       = "text"
    description     = "S3 bucket name"
    id              = "/cloud-portfolio/dev/s3/bucket"
    key_id          = [90mnull[0m[0m
    name            = "/cloud-portfolio/dev/s3/bucket"
    tags            = {
        "Name" = "cloud-portfolio-dev-s3-bucket"
    }
    tags_all        = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-s3-bucket"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    tier            = "Standard"
    type            = "String"
    value           = (sensitive value)
    value_wo        = (write-only attribute)
    version         = 1
}

# aws_wafv2_web_acl.cloudfront:
resource "aws_wafv2_web_acl" "cloudfront" {
    application_integration_url = [90mnull[0m[0m
    arn                         = "arn:aws:wafv2:us-east-1:298393324887:global/webacl/cloud-portfolio-dev-cloudfront-waf/2211aa71-b912-4a9c-ac3f-3ed32e73565f"
    capacity                    = 1103
    description                 = [90mnull[0m[0m
    id                          = "2211aa71-b912-4a9c-ac3f-3ed32e73565f"
    lock_token                  = "7b0b260f-5ef3-4b6b-94e6-0dbf753dd604"
    name                        = "cloud-portfolio-dev-cloudfront-waf"
    name_prefix                 = [90mnull[0m[0m
    scope                       = "CLOUDFRONT"
    tags                        = {
        "Name" = "cloud-portfolio-dev-cloudfront-waf"
    }
    tags_all                    = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-cloudfront-waf"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    token_domains               = []

    default_action {
        allow {
        }
    }

    rule {
        name     = "GeoBlockRule"
        priority = 5

        action {
            block {
            }
        }

        statement {
            not_statement {
                statement {
                    geo_match_statement {
                        country_codes = [
                            "US",
                            "CA",
                            "GB",
                            "DE",
                            "FR",
                            "AU",
                        ]
                    }
                }
            }
        }

        visibility_config {
            cloudwatch_metrics_enabled = true
            metric_name                = "GeoBlockRule"
            sampled_requests_enabled   = true
        }
    }
    rule {
        name     = "RateLimitRule"
        priority = 1

        action {
            block {
            }
        }

        statement {
            rate_based_statement {
                aggregate_key_type    = "IP"
                evaluation_window_sec = 300
                limit                 = 2000
            }
        }

        visibility_config {
            cloudwatch_metrics_enabled = true
            metric_name                = "RateLimitRule"
            sampled_requests_enabled   = true
        }
    }
    rule {
        name     = "AWSManagedRulesCommonRuleSet"
        priority = 2

        override_action {
            none {}
        }

        statement {
            managed_rule_group_statement {
                name        = "AWSManagedRulesCommonRuleSet"
                vendor_name = "AWS"
                version     = [90mnull[0m[0m
            }
        }

        visibility_config {
            cloudwatch_metrics_enabled = true
            metric_name                = "AWSManagedRulesCommonRuleSetMetric"
            sampled_requests_enabled   = true
        }
    }
    rule {
        name     = "AWSManagedRulesKnownBadInputsRuleSet"
        priority = 3

        override_action {
            none {}
        }

        statement {
            managed_rule_group_statement {
                name        = "AWSManagedRulesKnownBadInputsRuleSet"
                vendor_name = "AWS"
                version     = [90mnull[0m[0m
            }
        }

        visibility_config {
            cloudwatch_metrics_enabled = true
            metric_name                = "AWSManagedRulesKnownBadInputsRuleSetMetric"
            sampled_requests_enabled   = true
        }
    }
    rule {
        name     = "AWSManagedRulesSQLiRuleSet"
        priority = 4

        override_action {
            none {}
        }

        statement {
            managed_rule_group_statement {
                name        = "AWSManagedRulesSQLiRuleSet"
                vendor_name = "AWS"
                version     = [90mnull[0m[0m
            }
        }

        visibility_config {
            cloudwatch_metrics_enabled = true
            metric_name                = "AWSManagedRulesSQLiRuleSetMetric"
            sampled_requests_enabled   = true
        }
    }

    visibility_config {
        cloudwatch_metrics_enabled = true
        metric_name                = "cloud-portfolio-dev-cloudfront-waf"
        sampled_requests_enabled   = true
    }
}

# aws_xray_group.main:
resource "aws_xray_group" "main" {
    arn               = "arn:aws:xray:us-east-1:298393324887:group/cloud-portfolio-dev/JP3B6XB4KJPV74KA5TLM2D2WHRC7235BODWF7F67V7NHD6DIVNSQ"
    filter_expression = "service(\"cloud-portfolio-app\") OR annotation.project = \"cloud-portfolio\""
    group_name        = "cloud-portfolio-dev"
    id                = "arn:aws:xray:us-east-1:298393324887:group/cloud-portfolio-dev/JP3B6XB4KJPV74KA5TLM2D2WHRC7235BODWF7F67V7NHD6DIVNSQ"
    tags              = {
        "Name" = "cloud-portfolio-dev-xray-group"
    }
    tags_all          = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-xray-group"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }

    insights_configuration {
        insights_enabled      = true
        notifications_enabled = false
    }
}

# aws_xray_sampling_rule.main:
resource "aws_xray_sampling_rule" "main" {
    arn            = "arn:aws:xray:us-east-1:298393324887:sampling-rule/cloud-portfolio-dev-sampling"
    attributes     = {
        "Environment" = "dev"
        "Project"     = "cloud-portfolio"
    }
    fixed_rate     = 0.1
    host           = "*"
    http_method    = "*"
    id             = "cloud-portfolio-dev-sampling"
    priority       = 1000
    reservoir_size = 1
    resource_arn   = "*"
    rule_name      = "cloud-portfolio-dev-sampling"
    service_name   = "*"
    service_type   = "*"
    tags           = {
        "Name" = "cloud-portfolio-dev-xray-sampling"
    }
    tags_all       = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-xray-sampling"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    url_path       = "*"
    version        = 1
}

# random_password.db_password:
resource "random_password" "db_password" {
    bcrypt_hash      = (sensitive value)
    id               = "none"
    length           = 16
    lower            = true
    min_lower        = 0
    min_numeric      = 0
    min_special      = 0
    min_upper        = 0
    number           = true
    numeric          = true
    override_special = "!#$%&*()-_=+[]{}<>:?"
    result           = (sensitive value)
    special          = true
    upper            = true
}

# random_string.bucket_suffix:
resource "random_string" "bucket_suffix" {
    id          = "g8al5lmt"
    length      = 8
    lower       = true
    min_lower   = 0
    min_numeric = 0
    min_special = 0
    min_upper   = 0
    number      = true
    numeric     = true
    result      = "g8al5lmt"
    special     = false
    upper       = false
}


# module.security_groups.aws_security_group.alb:
resource "aws_security_group" "alb" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group/sg-0c0542dce02baad53"
    description            = "Security group for Application Load Balancer"
    egress                 = [
        {
            cidr_blocks      = []
            description      = "Allow traffic to application servers"
            from_port        = 8080
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = [
                "sg-0bd6ac230a3a817a5",
            ]
            self             = false
            to_port          = 8080
        },
    ]
    id                     = "sg-0c0542dce02baad53"
    ingress                = [
        {
            cidr_blocks      = [
                "0.0.0.0/0",
            ]
            description      = "Allow HTTP from internet (for redirect to HTTPS)"
            from_port        = 80
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = []
            self             = false
            to_port          = 80
        },
        {
            cidr_blocks      = [
                "0.0.0.0/0",
            ]
            description      = "Allow HTTPS from internet"
            from_port        = 443
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = []
            self             = false
            to_port          = 443
        },
    ]
    name                   = "cloud-portfolio-dev-alb-sg"
    name_prefix            = [90mnull[0m[0m
    owner_id               = "298393324887"
    revoke_rules_on_delete = false
    tags                   = {
        "Name" = "cloud-portfolio-dev-alb-sg"
        "Tier" = "load-balancer"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-alb-sg"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Tier"        = "load-balancer"
    }
    vpc_id                 = "vpc-02fbf198865b54295"
}

# module.security_groups.aws_security_group.application:
resource "aws_security_group" "application" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group/sg-0bd6ac230a3a817a5"
    description            = "Security group for application servers"
    egress                 = [
        {
            cidr_blocks      = [
                "0.0.0.0/0",
            ]
            description      = "Allow HTTP to internet for package updates"
            from_port        = 80
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = []
            self             = false
            to_port          = 80
        },
        {
            cidr_blocks      = [
                "0.0.0.0/0",
            ]
            description      = "Allow HTTPS to internet for external APIs"
            from_port        = 443
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = []
            self             = false
            to_port          = 443
        },
        {
            cidr_blocks      = []
            description      = "Allow traffic to ElastiCache"
            from_port        = 6379
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = [
                "sg-0434c543000d36fa1",
            ]
            self             = false
            to_port          = 6379
        },
        {
            cidr_blocks      = []
            description      = "Allow traffic to database"
            from_port        = 3306
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = [
                "sg-042031d2056cef0a8",
            ]
            self             = false
            to_port          = 3306
        },
    ]
    id                     = "sg-0bd6ac230a3a817a5"
    ingress                = [
        {
            cidr_blocks      = []
            description      = "Allow SSH from management instances"
            from_port        = 22
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = [
                "sg-04513277eb8c9dade",
            ]
            self             = false
            to_port          = 22
        },
        {
            cidr_blocks      = []
            description      = "Allow traffic from ALB"
            from_port        = 8080
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = [
                "sg-0c0542dce02baad53",
            ]
            self             = false
            to_port          = 8080
        },
    ]
    name                   = "cloud-portfolio-dev-app-sg"
    name_prefix            = [90mnull[0m[0m
    owner_id               = "298393324887"
    revoke_rules_on_delete = false
    tags                   = {
        "Name" = "cloud-portfolio-dev-app-sg"
        "Tier" = "application"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-app-sg"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Tier"        = "application"
    }
    vpc_id                 = "vpc-02fbf198865b54295"
}

# module.security_groups.aws_security_group.database:
resource "aws_security_group" "database" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group/sg-042031d2056cef0a8"
    description            = "Security group for RDS database instances"
    egress                 = []
    id                     = "sg-042031d2056cef0a8"
    ingress                = [
        {
            cidr_blocks      = []
            description      = "Allow MySQL from application servers"
            from_port        = 3306
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = [
                "sg-0bd6ac230a3a817a5",
            ]
            self             = false
            to_port          = 3306
        },
        {
            cidr_blocks      = []
            description      = "Allow MySQL from management instances for administration"
            from_port        = 3306
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = [
                "sg-04513277eb8c9dade",
            ]
            self             = false
            to_port          = 3306
        },
    ]
    name                   = "cloud-portfolio-dev-db-sg"
    name_prefix            = [90mnull[0m[0m
    owner_id               = "298393324887"
    revoke_rules_on_delete = false
    tags                   = {
        "Name" = "cloud-portfolio-dev-db-sg"
        "Tier" = "database"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-db-sg"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Tier"        = "database"
    }
    vpc_id                 = "vpc-02fbf198865b54295"
}

# module.security_groups.aws_security_group.elasticache[0]:
resource "aws_security_group" "elasticache" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group/sg-0434c543000d36fa1"
    description            = "Security group for ElastiCache Redis cluster"
    egress                 = []
    id                     = "sg-0434c543000d36fa1"
    ingress                = [
        {
            cidr_blocks      = []
            description      = "Allow Redis from application servers"
            from_port        = 6379
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = [
                "sg-0bd6ac230a3a817a5",
            ]
            self             = false
            to_port          = 6379
        },
    ]
    name                   = "cloud-portfolio-dev-cache-sg"
    name_prefix            = [90mnull[0m[0m
    owner_id               = "298393324887"
    revoke_rules_on_delete = false
    tags                   = {
        "Name" = "cloud-portfolio-dev-cache-sg"
        "Tier" = "cache"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-cache-sg"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Tier"        = "cache"
    }
    vpc_id                 = "vpc-02fbf198865b54295"
}

# module.security_groups.aws_security_group.management:
resource "aws_security_group" "management" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group/sg-04513277eb8c9dade"
    description            = "Security group for management/bastion instances"
    egress                 = [
        {
            cidr_blocks      = [
                "0.0.0.0/0",
            ]
            description      = "Allow HTTP to internet"
            from_port        = 80
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = []
            self             = false
            to_port          = 80
        },
        {
            cidr_blocks      = [
                "0.0.0.0/0",
            ]
            description      = "Allow HTTPS to internet"
            from_port        = 443
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = []
            self             = false
            to_port          = 443
        },
        {
            cidr_blocks      = []
            description      = "Allow MySQL to database for administration"
            from_port        = 3306
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = [
                "sg-042031d2056cef0a8",
            ]
            self             = false
            to_port          = 3306
        },
        {
            cidr_blocks      = []
            description      = "Allow SSH to application servers"
            from_port        = 22
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = [
                "sg-0bd6ac230a3a817a5",
            ]
            self             = false
            to_port          = 22
        },
    ]
    id                     = "sg-04513277eb8c9dade"
    ingress                = [
        {
            cidr_blocks      = [
                "98.170.212.163/32",
            ]
            description      = "Allow HTTPS from 98.170.212.163/32"
            from_port        = 443
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = []
            self             = false
            to_port          = 443
        },
        {
            cidr_blocks      = [
                "98.170.212.163/32",
            ]
            description      = "Allow SSH from 98.170.212.163/32"
            from_port        = 22
            ipv6_cidr_blocks = []
            prefix_list_ids  = []
            protocol         = "tcp"
            security_groups  = []
            self             = false
            to_port          = 22
        },
    ]
    name                   = "cloud-portfolio-dev-mgmt-sg"
    name_prefix            = [90mnull[0m[0m
    owner_id               = "298393324887"
    revoke_rules_on_delete = false
    tags                   = {
        "Name" = "cloud-portfolio-dev-mgmt-sg"
        "Tier" = "management"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-mgmt-sg"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Tier"        = "management"
    }
    vpc_id                 = "vpc-02fbf198865b54295"
}

# module.security_groups.aws_vpc_security_group_egress_rule.alb_to_app:
resource "aws_vpc_security_group_egress_rule" "alb_to_app" {
    arn                          = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-04be9bc22125af39b"
    description                  = "Allow traffic to application servers"
    from_port                    = 8080
    id                           = "sgr-04be9bc22125af39b"
    ip_protocol                  = "tcp"
    referenced_security_group_id = "sg-0bd6ac230a3a817a5"
    security_group_id            = "sg-0c0542dce02baad53"
    security_group_rule_id       = "sgr-04be9bc22125af39b"
    tags                         = {
        "Name" = "cloud-portfolio-dev-alb-to-app-egress"
    }
    tags_all                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-alb-to-app-egress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                      = 8080
}

# module.security_groups.aws_vpc_security_group_egress_rule.app_http_out:
resource "aws_vpc_security_group_egress_rule" "app_http_out" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-0f5d97430f22adadb"
    cidr_ipv4              = "0.0.0.0/0"
    description            = "Allow HTTP to internet for package updates"
    from_port              = 80
    id                     = "sgr-0f5d97430f22adadb"
    ip_protocol            = "tcp"
    security_group_id      = "sg-0bd6ac230a3a817a5"
    security_group_rule_id = "sgr-0f5d97430f22adadb"
    tags                   = {
        "Name" = "cloud-portfolio-dev-app-http-egress"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-app-http-egress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                = 80
}

# module.security_groups.aws_vpc_security_group_egress_rule.app_https_out:
resource "aws_vpc_security_group_egress_rule" "app_https_out" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-07d52af5edd96c1d0"
    cidr_ipv4              = "0.0.0.0/0"
    description            = "Allow HTTPS to internet for external APIs"
    from_port              = 443
    id                     = "sgr-07d52af5edd96c1d0"
    ip_protocol            = "tcp"
    security_group_id      = "sg-0bd6ac230a3a817a5"
    security_group_rule_id = "sgr-07d52af5edd96c1d0"
    tags                   = {
        "Name" = "cloud-portfolio-dev-app-https-egress"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-app-https-egress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                = 443
}

# module.security_groups.aws_vpc_security_group_egress_rule.app_to_cache[0]:
resource "aws_vpc_security_group_egress_rule" "app_to_cache" {
    arn                          = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-01c4e304de9f6f7d9"
    description                  = "Allow traffic to ElastiCache"
    from_port                    = 6379
    id                           = "sgr-01c4e304de9f6f7d9"
    ip_protocol                  = "tcp"
    referenced_security_group_id = "sg-0434c543000d36fa1"
    security_group_id            = "sg-0bd6ac230a3a817a5"
    security_group_rule_id       = "sgr-01c4e304de9f6f7d9"
    tags                         = {
        "Name" = "cloud-portfolio-dev-app-to-cache-egress"
    }
    tags_all                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-app-to-cache-egress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                      = 6379
}

# module.security_groups.aws_vpc_security_group_egress_rule.app_to_db:
resource "aws_vpc_security_group_egress_rule" "app_to_db" {
    arn                          = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-0d5eb4cc5536eeb04"
    description                  = "Allow traffic to database"
    from_port                    = 3306
    id                           = "sgr-0d5eb4cc5536eeb04"
    ip_protocol                  = "tcp"
    referenced_security_group_id = "sg-042031d2056cef0a8"
    security_group_id            = "sg-0bd6ac230a3a817a5"
    security_group_rule_id       = "sgr-0d5eb4cc5536eeb04"
    tags                         = {
        "Name" = "cloud-portfolio-dev-app-to-db-egress"
    }
    tags_all                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-app-to-db-egress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                      = 3306
}

# module.security_groups.aws_vpc_security_group_egress_rule.mgmt_http_out:
resource "aws_vpc_security_group_egress_rule" "mgmt_http_out" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-0efa8060823563bb2"
    cidr_ipv4              = "0.0.0.0/0"
    description            = "Allow HTTP to internet"
    from_port              = 80
    id                     = "sgr-0efa8060823563bb2"
    ip_protocol            = "tcp"
    security_group_id      = "sg-04513277eb8c9dade"
    security_group_rule_id = "sgr-0efa8060823563bb2"
    tags                   = {
        "Name" = "cloud-portfolio-dev-mgmt-http-egress"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-mgmt-http-egress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                = 80
}

# module.security_groups.aws_vpc_security_group_egress_rule.mgmt_https_out:
resource "aws_vpc_security_group_egress_rule" "mgmt_https_out" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-0def3dd83f81285b5"
    cidr_ipv4              = "0.0.0.0/0"
    description            = "Allow HTTPS to internet"
    from_port              = 443
    id                     = "sgr-0def3dd83f81285b5"
    ip_protocol            = "tcp"
    security_group_id      = "sg-04513277eb8c9dade"
    security_group_rule_id = "sgr-0def3dd83f81285b5"
    tags                   = {
        "Name" = "cloud-portfolio-dev-mgmt-https-egress"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-mgmt-https-egress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                = 443
}

# module.security_groups.aws_vpc_security_group_egress_rule.mgmt_to_app_ssh:
resource "aws_vpc_security_group_egress_rule" "mgmt_to_app_ssh" {
    arn                          = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-03665613cff5b5eee"
    description                  = "Allow SSH to application servers"
    from_port                    = 22
    id                           = "sgr-03665613cff5b5eee"
    ip_protocol                  = "tcp"
    referenced_security_group_id = "sg-0bd6ac230a3a817a5"
    security_group_id            = "sg-04513277eb8c9dade"
    security_group_rule_id       = "sgr-03665613cff5b5eee"
    tags                         = {
        "Name" = "cloud-portfolio-dev-mgmt-to-app-ssh-egress"
    }
    tags_all                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-mgmt-to-app-ssh-egress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                      = 22
}

# module.security_groups.aws_vpc_security_group_egress_rule.mgmt_to_db:
resource "aws_vpc_security_group_egress_rule" "mgmt_to_db" {
    arn                          = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-0a6b74f00d7b5c708"
    description                  = "Allow MySQL to database for administration"
    from_port                    = 3306
    id                           = "sgr-0a6b74f00d7b5c708"
    ip_protocol                  = "tcp"
    referenced_security_group_id = "sg-042031d2056cef0a8"
    security_group_id            = "sg-04513277eb8c9dade"
    security_group_rule_id       = "sgr-0a6b74f00d7b5c708"
    tags                         = {
        "Name" = "cloud-portfolio-dev-mgmt-to-db-egress"
    }
    tags_all                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-mgmt-to-db-egress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                      = 3306
}

# module.security_groups.aws_vpc_security_group_ingress_rule.alb_http:
resource "aws_vpc_security_group_ingress_rule" "alb_http" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-00c366a33fa53fab1"
    cidr_ipv4              = "0.0.0.0/0"
    description            = "Allow HTTP from internet (for redirect to HTTPS)"
    from_port              = 80
    id                     = "sgr-00c366a33fa53fab1"
    ip_protocol            = "tcp"
    security_group_id      = "sg-0c0542dce02baad53"
    security_group_rule_id = "sgr-00c366a33fa53fab1"
    tags                   = {
        "Name" = "cloud-portfolio-dev-alb-http-ingress"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-alb-http-ingress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                = 80
}

# module.security_groups.aws_vpc_security_group_ingress_rule.alb_https:
resource "aws_vpc_security_group_ingress_rule" "alb_https" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-091b59d2fa721734f"
    cidr_ipv4              = "0.0.0.0/0"
    description            = "Allow HTTPS from internet"
    from_port              = 443
    id                     = "sgr-091b59d2fa721734f"
    ip_protocol            = "tcp"
    security_group_id      = "sg-0c0542dce02baad53"
    security_group_rule_id = "sgr-091b59d2fa721734f"
    tags                   = {
        "Name" = "cloud-portfolio-dev-alb-https-ingress"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-alb-https-ingress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                = 443
}

# module.security_groups.aws_vpc_security_group_ingress_rule.app_from_alb:
resource "aws_vpc_security_group_ingress_rule" "app_from_alb" {
    arn                          = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-0b2af1fa678ffb6ea"
    description                  = "Allow traffic from ALB"
    from_port                    = 8080
    id                           = "sgr-0b2af1fa678ffb6ea"
    ip_protocol                  = "tcp"
    referenced_security_group_id = "sg-0c0542dce02baad53"
    security_group_id            = "sg-0bd6ac230a3a817a5"
    security_group_rule_id       = "sgr-0b2af1fa678ffb6ea"
    tags                         = {
        "Name" = "cloud-portfolio-dev-app-from-alb-ingress"
    }
    tags_all                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-app-from-alb-ingress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                      = 8080
}

# module.security_groups.aws_vpc_security_group_ingress_rule.app_ssh_from_mgmt:
resource "aws_vpc_security_group_ingress_rule" "app_ssh_from_mgmt" {
    arn                          = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-085160093d729ca36"
    description                  = "Allow SSH from management instances"
    from_port                    = 22
    id                           = "sgr-085160093d729ca36"
    ip_protocol                  = "tcp"
    referenced_security_group_id = "sg-04513277eb8c9dade"
    security_group_id            = "sg-0bd6ac230a3a817a5"
    security_group_rule_id       = "sgr-085160093d729ca36"
    tags                         = {
        "Name" = "cloud-portfolio-dev-app-ssh-from-mgmt-ingress"
    }
    tags_all                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-app-ssh-from-mgmt-ingress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                      = 22
}

# module.security_groups.aws_vpc_security_group_ingress_rule.cache_from_app[0]:
resource "aws_vpc_security_group_ingress_rule" "cache_from_app" {
    arn                          = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-02cbc30e9bd7daefa"
    description                  = "Allow Redis from application servers"
    from_port                    = 6379
    id                           = "sgr-02cbc30e9bd7daefa"
    ip_protocol                  = "tcp"
    referenced_security_group_id = "sg-0bd6ac230a3a817a5"
    security_group_id            = "sg-0434c543000d36fa1"
    security_group_rule_id       = "sgr-02cbc30e9bd7daefa"
    tags                         = {
        "Name" = "cloud-portfolio-dev-cache-from-app-ingress"
    }
    tags_all                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-cache-from-app-ingress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                      = 6379
}

# module.security_groups.aws_vpc_security_group_ingress_rule.db_from_app:
resource "aws_vpc_security_group_ingress_rule" "db_from_app" {
    arn                          = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-063279620e5087f33"
    description                  = "Allow MySQL from application servers"
    from_port                    = 3306
    id                           = "sgr-063279620e5087f33"
    ip_protocol                  = "tcp"
    referenced_security_group_id = "sg-0bd6ac230a3a817a5"
    security_group_id            = "sg-042031d2056cef0a8"
    security_group_rule_id       = "sgr-063279620e5087f33"
    tags                         = {
        "Name" = "cloud-portfolio-dev-db-from-app-ingress"
    }
    tags_all                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-db-from-app-ingress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                      = 3306
}

# module.security_groups.aws_vpc_security_group_ingress_rule.db_from_mgmt:
resource "aws_vpc_security_group_ingress_rule" "db_from_mgmt" {
    arn                          = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-0babbf0a68e2cb1b8"
    description                  = "Allow MySQL from management instances for administration"
    from_port                    = 3306
    id                           = "sgr-0babbf0a68e2cb1b8"
    ip_protocol                  = "tcp"
    referenced_security_group_id = "sg-04513277eb8c9dade"
    security_group_id            = "sg-042031d2056cef0a8"
    security_group_rule_id       = "sgr-0babbf0a68e2cb1b8"
    tags                         = {
        "Name" = "cloud-portfolio-dev-db-from-mgmt-ingress"
    }
    tags_all                     = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-db-from-mgmt-ingress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                      = 3306
}

# module.security_groups.aws_vpc_security_group_ingress_rule.mgmt_https["98.170.212.163/32"]:
resource "aws_vpc_security_group_ingress_rule" "mgmt_https" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-0e8e478933701a175"
    cidr_ipv4              = "98.170.212.163/32"
    description            = "Allow HTTPS from 98.170.212.163/32"
    from_port              = 443
    id                     = "sgr-0e8e478933701a175"
    ip_protocol            = "tcp"
    security_group_id      = "sg-04513277eb8c9dade"
    security_group_rule_id = "sgr-0e8e478933701a175"
    tags                   = {
        "Name" = "cloud-portfolio-dev-mgmt-https-ingress"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-mgmt-https-ingress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                = 443
}

# module.security_groups.aws_vpc_security_group_ingress_rule.mgmt_ssh["98.170.212.163/32"]:
resource "aws_vpc_security_group_ingress_rule" "mgmt_ssh" {
    arn                    = "arn:aws:ec2:us-east-1:298393324887:security-group-rule/sgr-0fc277a9a61a413f3"
    cidr_ipv4              = "98.170.212.163/32"
    description            = "Allow SSH from 98.170.212.163/32"
    from_port              = 22
    id                     = "sgr-0fc277a9a61a413f3"
    ip_protocol            = "tcp"
    security_group_id      = "sg-04513277eb8c9dade"
    security_group_rule_id = "sgr-0fc277a9a61a413f3"
    tags                   = {
        "Name" = "cloud-portfolio-dev-mgmt-ssh-ingress"
    }
    tags_all               = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-mgmt-ssh-ingress"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    to_port                = 22
}


# module.vpc.aws_db_subnet_group.main:
resource "aws_db_subnet_group" "main" {
    arn                     = "arn:aws:rds:us-east-1:298393324887:subgrp:cloud-portfolio-dev-db-subnet-group"
    description             = "Managed by Terraform"
    id                      = "cloud-portfolio-dev-db-subnet-group"
    name                    = "cloud-portfolio-dev-db-subnet-group"
    name_prefix             = [90mnull[0m[0m
    subnet_ids              = [
        "subnet-029889b9dc7cb4839",
        "subnet-06ccc4e492ed004db",
    ]
    supported_network_types = [
        "IPV4",
    ]
    tags                    = {
        "Name" = "cloud-portfolio-dev-db-subnet-group"
    }
    tags_all                = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-db-subnet-group"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    vpc_id                  = "vpc-02fbf198865b54295"
}

# module.vpc.aws_eip.nat:
resource "aws_eip" "nat" {
    allocation_id            = "eipalloc-07613046f421e7fdc"
    arn                      = "arn:aws:ec2:us-east-1:298393324887:elastic-ip/eipalloc-07613046f421e7fdc"
    association_id           = "eipassoc-0888b6405d723cf83"
    carrier_ip               = [90mnull[0m[0m
    customer_owned_ip        = [90mnull[0m[0m
    customer_owned_ipv4_pool = [90mnull[0m[0m
    domain                   = "vpc"
    id                       = "eipalloc-07613046f421e7fdc"
    instance                 = [90mnull[0m[0m
    network_border_group     = "us-east-1"
    network_interface        = "eni-04da987a16c13b9d2"
    private_dns              = "ip-10-0-1-214.ec2.internal"
    private_ip               = "10.0.1.214"
    ptr_record               = [90mnull[0m[0m
    public_dns               = "ec2-44-198-22-68.compute-1.amazonaws.com"
    public_ip                = "44.198.22.68"
    public_ipv4_pool         = "amazon"
    tags                     = {
        "Name" = "cloud-portfolio-dev-nat-eip"
    }
    tags_all                 = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-nat-eip"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    vpc                      = true
}

# module.vpc.aws_internet_gateway.main:
resource "aws_internet_gateway" "main" {
    arn      = "arn:aws:ec2:us-east-1:298393324887:internet-gateway/igw-08da08cb254b43fbf"
    id       = "igw-08da08cb254b43fbf"
    owner_id = "298393324887"
    tags     = {
        "Name" = "cloud-portfolio-dev-igw"
    }
    tags_all = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-igw"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
    vpc_id   = "vpc-02fbf198865b54295"
}

# module.vpc.aws_nat_gateway.main:
resource "aws_nat_gateway" "main" {
    allocation_id                      = "eipalloc-07613046f421e7fdc"
    association_id                     = "eipassoc-0888b6405d723cf83"
    connectivity_type                  = "public"
    id                                 = "nat-07028284eb1283677"
    network_interface_id               = "eni-04da987a16c13b9d2"
    private_ip                         = "10.0.1.214"
    public_ip                          = "44.198.22.68"
    secondary_allocation_ids           = []
    secondary_private_ip_address_count = 0
    secondary_private_ip_addresses     = []
    subnet_id                          = "subnet-0b616838f21cc364b"
    tags                               = {
        "Name" = "cloud-portfolio-dev-nat-gw"
    }
    tags_all                           = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-nat-gw"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
}

# module.vpc.aws_route.private_internet:
resource "aws_route" "private_internet" {
    carrier_gateway_id          = [90mnull[0m[0m
    core_network_arn            = [90mnull[0m[0m
    destination_cidr_block      = "0.0.0.0/0"
    destination_ipv6_cidr_block = [90mnull[0m[0m
    destination_prefix_list_id  = [90mnull[0m[0m
    egress_only_gateway_id      = [90mnull[0m[0m
    gateway_id                  = [90mnull[0m[0m
    id                          = "r-rtb-080beabd4eca9ce781080289494"
    instance_id                 = [90mnull[0m[0m
    instance_owner_id           = [90mnull[0m[0m
    local_gateway_id            = [90mnull[0m[0m
    nat_gateway_id              = "nat-07028284eb1283677"
    network_interface_id        = [90mnull[0m[0m
    origin                      = "CreateRoute"
    route_table_id              = "rtb-080beabd4eca9ce78"
    state                       = "active"
    transit_gateway_id          = [90mnull[0m[0m
    vpc_endpoint_id             = [90mnull[0m[0m
    vpc_peering_connection_id   = [90mnull[0m[0m
}

# module.vpc.aws_route.public_internet:
resource "aws_route" "public_internet" {
    carrier_gateway_id          = [90mnull[0m[0m
    core_network_arn            = [90mnull[0m[0m
    destination_cidr_block      = "0.0.0.0/0"
    destination_ipv6_cidr_block = [90mnull[0m[0m
    destination_prefix_list_id  = [90mnull[0m[0m
    egress_only_gateway_id      = [90mnull[0m[0m
    gateway_id                  = "igw-08da08cb254b43fbf"
    id                          = "r-rtb-00b441ce0ee01868d1080289494"
    instance_id                 = [90mnull[0m[0m
    instance_owner_id           = [90mnull[0m[0m
    local_gateway_id            = [90mnull[0m[0m
    nat_gateway_id              = [90mnull[0m[0m
    network_interface_id        = [90mnull[0m[0m
    origin                      = "CreateRoute"
    route_table_id              = "rtb-00b441ce0ee01868d"
    state                       = "active"
    transit_gateway_id          = [90mnull[0m[0m
    vpc_endpoint_id             = [90mnull[0m[0m
    vpc_peering_connection_id   = [90mnull[0m[0m
}

# module.vpc.aws_route_table.private:
resource "aws_route_table" "private" {
    arn              = "arn:aws:ec2:us-east-1:298393324887:route-table/rtb-080beabd4eca9ce78"
    id               = "rtb-080beabd4eca9ce78"
    owner_id         = "298393324887"
    propagating_vgws = []
    route            = [
        {
            carrier_gateway_id         = [90mnull[0m[0m
            cidr_block                 = "0.0.0.0/0"
            core_network_arn           = [90mnull[0m[0m
            destination_prefix_list_id = [90mnull[0m[0m
            egress_only_gateway_id     = [90mnull[0m[0m
            gateway_id                 = [90mnull[0m[0m
            ipv6_cidr_block            = [90mnull[0m[0m
            local_gateway_id           = [90mnull[0m[0m
            nat_gateway_id             = "nat-07028284eb1283677"
            network_interface_id       = [90mnull[0m[0m
            transit_gateway_id         = [90mnull[0m[0m
            vpc_endpoint_id            = [90mnull[0m[0m
            vpc_peering_connection_id  = [90mnull[0m[0m
        },
    ]
    tags             = {
        "Name" = "cloud-portfolio-dev-private-rt"
        "Type" = "private"
    }
    tags_all         = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-private-rt"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Type"        = "private"
    }
    vpc_id           = "vpc-02fbf198865b54295"
}

# module.vpc.aws_route_table.public:
resource "aws_route_table" "public" {
    arn              = "arn:aws:ec2:us-east-1:298393324887:route-table/rtb-00b441ce0ee01868d"
    id               = "rtb-00b441ce0ee01868d"
    owner_id         = "298393324887"
    propagating_vgws = []
    route            = [
        {
            carrier_gateway_id         = [90mnull[0m[0m
            cidr_block                 = "0.0.0.0/0"
            core_network_arn           = [90mnull[0m[0m
            destination_prefix_list_id = [90mnull[0m[0m
            egress_only_gateway_id     = [90mnull[0m[0m
            gateway_id                 = "igw-08da08cb254b43fbf"
            ipv6_cidr_block            = [90mnull[0m[0m
            local_gateway_id           = [90mnull[0m[0m
            nat_gateway_id             = [90mnull[0m[0m
            network_interface_id       = [90mnull[0m[0m
            transit_gateway_id         = [90mnull[0m[0m
            vpc_endpoint_id            = [90mnull[0m[0m
            vpc_peering_connection_id  = [90mnull[0m[0m
        },
    ]
    tags             = {
        "Name" = "cloud-portfolio-dev-public-rt"
        "Type" = "public"
    }
    tags_all         = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-public-rt"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Type"        = "public"
    }
    vpc_id           = "vpc-02fbf198865b54295"
}

# module.vpc.aws_route_table_association.private[0]:
resource "aws_route_table_association" "private" {
    gateway_id     = [90mnull[0m[0m
    id             = "rtbassoc-0404eea853504979e"
    route_table_id = "rtb-080beabd4eca9ce78"
    subnet_id      = "subnet-02d40ebb9d81672cb"
}

# module.vpc.aws_route_table_association.private[1]:
resource "aws_route_table_association" "private" {
    gateway_id     = [90mnull[0m[0m
    id             = "rtbassoc-00b77fa2d28fc9a29"
    route_table_id = "rtb-080beabd4eca9ce78"
    subnet_id      = "subnet-08d9f4a05dc2f8622"
}

# module.vpc.aws_route_table_association.public[0]:
resource "aws_route_table_association" "public" {
    gateway_id     = [90mnull[0m[0m
    id             = "rtbassoc-0204d926769f7ceca"
    route_table_id = "rtb-00b441ce0ee01868d"
    subnet_id      = "subnet-0b616838f21cc364b"
}

# module.vpc.aws_route_table_association.public[1]:
resource "aws_route_table_association" "public" {
    gateway_id     = [90mnull[0m[0m
    id             = "rtbassoc-059234cf100bbe6dc"
    route_table_id = "rtb-00b441ce0ee01868d"
    subnet_id      = "subnet-088897741ce7dd0c1"
}

# module.vpc.aws_subnet.database[0]:
resource "aws_subnet" "database" {
    arn                                            = "arn:aws:ec2:us-east-1:298393324887:subnet/subnet-06ccc4e492ed004db"
    assign_ipv6_address_on_creation                = false
    availability_zone                              = "us-east-1a"
    availability_zone_id                           = "use1-az1"
    cidr_block                                     = "10.0.21.0/24"
    customer_owned_ipv4_pool                       = [90mnull[0m[0m
    enable_dns64                                   = false
    enable_lni_at_device_index                     = 0
    enable_resource_name_dns_a_record_on_launch    = false
    enable_resource_name_dns_aaaa_record_on_launch = false
    id                                             = "subnet-06ccc4e492ed004db"
    ipv6_cidr_block                                = [90mnull[0m[0m
    ipv6_cidr_block_association_id                 = [90mnull[0m[0m
    ipv6_native                                    = false
    map_customer_owned_ip_on_launch                = false
    map_public_ip_on_launch                        = false
    outpost_arn                                    = [90mnull[0m[0m
    owner_id                                       = "298393324887"
    private_dns_hostname_type_on_launch            = "ip-name"
    tags                                           = {
        "Name" = "cloud-portfolio-dev-database-1"
        "Type" = "database"
    }
    tags_all                                       = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-database-1"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Type"        = "database"
    }
    vpc_id                                         = "vpc-02fbf198865b54295"
}

# module.vpc.aws_subnet.database[1]:
resource "aws_subnet" "database" {
    arn                                            = "arn:aws:ec2:us-east-1:298393324887:subnet/subnet-029889b9dc7cb4839"
    assign_ipv6_address_on_creation                = false
    availability_zone                              = "us-east-1b"
    availability_zone_id                           = "use1-az2"
    cidr_block                                     = "10.0.22.0/24"
    customer_owned_ipv4_pool                       = [90mnull[0m[0m
    enable_dns64                                   = false
    enable_lni_at_device_index                     = 0
    enable_resource_name_dns_a_record_on_launch    = false
    enable_resource_name_dns_aaaa_record_on_launch = false
    id                                             = "subnet-029889b9dc7cb4839"
    ipv6_cidr_block                                = [90mnull[0m[0m
    ipv6_cidr_block_association_id                 = [90mnull[0m[0m
    ipv6_native                                    = false
    map_customer_owned_ip_on_launch                = false
    map_public_ip_on_launch                        = false
    outpost_arn                                    = [90mnull[0m[0m
    owner_id                                       = "298393324887"
    private_dns_hostname_type_on_launch            = "ip-name"
    tags                                           = {
        "Name" = "cloud-portfolio-dev-database-2"
        "Type" = "database"
    }
    tags_all                                       = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-database-2"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Type"        = "database"
    }
    vpc_id                                         = "vpc-02fbf198865b54295"
}

# module.vpc.aws_subnet.private[0]:
resource "aws_subnet" "private" {
    arn                                            = "arn:aws:ec2:us-east-1:298393324887:subnet/subnet-02d40ebb9d81672cb"
    assign_ipv6_address_on_creation                = false
    availability_zone                              = "us-east-1a"
    availability_zone_id                           = "use1-az1"
    cidr_block                                     = "10.0.11.0/24"
    customer_owned_ipv4_pool                       = [90mnull[0m[0m
    enable_dns64                                   = false
    enable_lni_at_device_index                     = 0
    enable_resource_name_dns_a_record_on_launch    = false
    enable_resource_name_dns_aaaa_record_on_launch = false
    id                                             = "subnet-02d40ebb9d81672cb"
    ipv6_cidr_block                                = [90mnull[0m[0m
    ipv6_cidr_block_association_id                 = [90mnull[0m[0m
    ipv6_native                                    = false
    map_customer_owned_ip_on_launch                = false
    map_public_ip_on_launch                        = false
    outpost_arn                                    = [90mnull[0m[0m
    owner_id                                       = "298393324887"
    private_dns_hostname_type_on_launch            = "ip-name"
    tags                                           = {
        "Name" = "cloud-portfolio-dev-private-1"
        "Type" = "private"
    }
    tags_all                                       = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-private-1"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Type"        = "private"
    }
    vpc_id                                         = "vpc-02fbf198865b54295"
}

# module.vpc.aws_subnet.private[1]:
resource "aws_subnet" "private" {
    arn                                            = "arn:aws:ec2:us-east-1:298393324887:subnet/subnet-08d9f4a05dc2f8622"
    assign_ipv6_address_on_creation                = false
    availability_zone                              = "us-east-1b"
    availability_zone_id                           = "use1-az2"
    cidr_block                                     = "10.0.12.0/24"
    customer_owned_ipv4_pool                       = [90mnull[0m[0m
    enable_dns64                                   = false
    enable_lni_at_device_index                     = 0
    enable_resource_name_dns_a_record_on_launch    = false
    enable_resource_name_dns_aaaa_record_on_launch = false
    id                                             = "subnet-08d9f4a05dc2f8622"
    ipv6_cidr_block                                = [90mnull[0m[0m
    ipv6_cidr_block_association_id                 = [90mnull[0m[0m
    ipv6_native                                    = false
    map_customer_owned_ip_on_launch                = false
    map_public_ip_on_launch                        = false
    outpost_arn                                    = [90mnull[0m[0m
    owner_id                                       = "298393324887"
    private_dns_hostname_type_on_launch            = "ip-name"
    tags                                           = {
        "Name" = "cloud-portfolio-dev-private-2"
        "Type" = "private"
    }
    tags_all                                       = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-private-2"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Type"        = "private"
    }
    vpc_id                                         = "vpc-02fbf198865b54295"
}

# module.vpc.aws_subnet.public[0]:
resource "aws_subnet" "public" {
    arn                                            = "arn:aws:ec2:us-east-1:298393324887:subnet/subnet-0b616838f21cc364b"
    assign_ipv6_address_on_creation                = false
    availability_zone                              = "us-east-1a"
    availability_zone_id                           = "use1-az1"
    cidr_block                                     = "10.0.1.0/24"
    customer_owned_ipv4_pool                       = [90mnull[0m[0m
    enable_dns64                                   = false
    enable_lni_at_device_index                     = 0
    enable_resource_name_dns_a_record_on_launch    = false
    enable_resource_name_dns_aaaa_record_on_launch = false
    id                                             = "subnet-0b616838f21cc364b"
    ipv6_cidr_block                                = [90mnull[0m[0m
    ipv6_cidr_block_association_id                 = [90mnull[0m[0m
    ipv6_native                                    = false
    map_customer_owned_ip_on_launch                = false
    map_public_ip_on_launch                        = true
    outpost_arn                                    = [90mnull[0m[0m
    owner_id                                       = "298393324887"
    private_dns_hostname_type_on_launch            = "ip-name"
    tags                                           = {
        "Name" = "cloud-portfolio-dev-public-1"
        "Type" = "public"
    }
    tags_all                                       = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-public-1"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Type"        = "public"
    }
    vpc_id                                         = "vpc-02fbf198865b54295"
}

# module.vpc.aws_subnet.public[1]:
resource "aws_subnet" "public" {
    arn                                            = "arn:aws:ec2:us-east-1:298393324887:subnet/subnet-088897741ce7dd0c1"
    assign_ipv6_address_on_creation                = false
    availability_zone                              = "us-east-1b"
    availability_zone_id                           = "use1-az2"
    cidr_block                                     = "10.0.2.0/24"
    customer_owned_ipv4_pool                       = [90mnull[0m[0m
    enable_dns64                                   = false
    enable_lni_at_device_index                     = 0
    enable_resource_name_dns_a_record_on_launch    = false
    enable_resource_name_dns_aaaa_record_on_launch = false
    id                                             = "subnet-088897741ce7dd0c1"
    ipv6_cidr_block                                = [90mnull[0m[0m
    ipv6_cidr_block_association_id                 = [90mnull[0m[0m
    ipv6_native                                    = false
    map_customer_owned_ip_on_launch                = false
    map_public_ip_on_launch                        = true
    outpost_arn                                    = [90mnull[0m[0m
    owner_id                                       = "298393324887"
    private_dns_hostname_type_on_launch            = "ip-name"
    tags                                           = {
        "Name" = "cloud-portfolio-dev-public-2"
        "Type" = "public"
    }
    tags_all                                       = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-public-2"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
        "Type"        = "public"
    }
    vpc_id                                         = "vpc-02fbf198865b54295"
}

# module.vpc.aws_vpc.main:
resource "aws_vpc" "main" {
    arn                                  = "arn:aws:ec2:us-east-1:298393324887:vpc/vpc-02fbf198865b54295"
    assign_generated_ipv6_cidr_block     = false
    cidr_block                           = "10.0.0.0/16"
    default_network_acl_id               = "acl-0b4b95913b3c0617c"
    default_route_table_id               = "rtb-0d4761c37b40724af"
    default_security_group_id            = "sg-0508369cfee015d9c"
    dhcp_options_id                      = "dopt-0a777646d7c976ecf"
    enable_dns_hostnames                 = true
    enable_dns_support                   = true
    enable_network_address_usage_metrics = false
    id                                   = "vpc-02fbf198865b54295"
    instance_tenancy                     = "default"
    ipv6_association_id                  = [90mnull[0m[0m
    ipv6_cidr_block                      = [90mnull[0m[0m
    ipv6_cidr_block_network_border_group = [90mnull[0m[0m
    ipv6_ipam_pool_id                    = [90mnull[0m[0m
    ipv6_netmask_length                  = 0
    main_route_table_id                  = "rtb-0d4761c37b40724af"
    owner_id                             = "298393324887"
    tags                                 = {
        "Name" = "cloud-portfolio-dev-vpc"
    }
    tags_all                             = {
        "Environment" = "dev"
        "ManagedBy"   = "terraform"
        "Name"        = "cloud-portfolio-dev-vpc"
        "Owner"       = "jacobspeart@gmail.com"
        "Project"     = "cloud-portfolio"
    }
}


Outputs:

alb_dns_name = "cloud-portfolio-dev-alb-1314858601.us-east-1.elb.amazonaws.com"
alb_security_group_id = "sg-0c0542dce02baad53"
alb_url = "http://cloud-portfolio-dev-alb-1314858601.us-east-1.elb.amazonaws.com"
all_security_group_ids = {
    alb         = "sg-0c0542dce02baad53"
    application = "sg-0bd6ac230a3a817a5"
    database    = "sg-042031d2056cef0a8"
    elasticache = "sg-0434c543000d36fa1"
    management  = "sg-04513277eb8c9dade"
}
application_security_group_id = "sg-0bd6ac230a3a817a5"
asg_name = "cloud-portfolio-dev-web-asg"
backup_plan_id = "5f612e60-98ce-44ff-b9fe-910638092bbf"
backup_vault_arn = "arn:aws:backup:us-east-1:298393324887:backup-vault:cloud-portfolio-dev-backup-vault"
backup_vault_name = "cloud-portfolio-dev-backup-vault"
cloudfront_distribution_id = "EEGNBRUORVUNN"
cloudfront_domain_name = "d3gk6kd8d1vp2t.cloudfront.net"
cloudfront_url = "https://d3gk6kd8d1vp2t.cloudfront.net"
cloudwatch_dashboard_url = "https://console.aws.amazon.com/cloudwatch/home?region=us-east-1#dashboards:name=cloud-portfolio-dev-dashboard"
database_security_group_id = "sg-042031d2056cef0a8"
db_secret_arn = (sensitive value)
ecr_repository_name = "cloud-portfolio-dev-app"
ecr_repository_url = "298393324887.dkr.ecr.us-east-1.amazonaws.com/cloud-portfolio-dev-app"
github_actions_role_arn = "arn:aws:iam::298393324887:role/cloud-portfolio-github-actions-role"
internet_gateway_id = "igw-08da08cb254b43fbf"
lambda_api_processor_arn = "arn:aws:lambda:us-east-1:298393324887:function:cloud-portfolio-dev-api-processor"
lambda_api_processor_url = "https://m6xxkellljejn4uxi2d4rumfiu0laqet.lambda-url.us-east-1.on.aws/"
launch_template_id = "lt-09b4e56a20f8cda75"
management_security_group_id = "sg-04513277eb8c9dade"
nat_gateway_id = "nat-07028284eb1283677"
nat_gateway_public_ip = "44.198.22.68"
private_subnet_ids = [
    "subnet-02d40ebb9d81672cb",
    "subnet-08d9f4a05dc2f8622",
]
public_subnet_ids = [
    "subnet-0b616838f21cc364b",
    "subnet-088897741ce7dd0c1",
]
rds_database_name = "cloudportfolio"
rds_endpoint = (sensitive value)
s3_bucket_domain = "cloud-portfolio-dev-static-g8al5lmt.s3.amazonaws.com"
s3_bucket_name = "cloud-portfolio-dev-static-g8al5lmt"
service_discovery_arn = "arn:aws:servicediscovery:us-east-1:298393324887:service/srv-tk36wtks22bi3kfu"
service_discovery_namespace = "cloud-portfolio.local"
service_discovery_service_name = "app"
sns_topic_arn = "arn:aws:sns:us-east-1:298393324887:cloud-portfolio-dev-alarms"
vpc_cidr = "10.0.0.0/16"
vpc_id = "vpc-02fbf198865b54295"
xray_group_name = "cloud-portfolio-dev"
xray_service_map_url = "https://console.aws.amazon.com/xray/home?region=us-east-1#/service-map"
xray_traces_url = "https://console.aws.amazon.com/xray/home?region=us-east-1#/traces"
